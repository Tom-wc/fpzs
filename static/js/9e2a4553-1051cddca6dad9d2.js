(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{2860:function(e,t){(function(e){"use strict";function t(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw TypeError("Private element is not present on this object")}function i(e,i){return e.get(t(e,i))}function n(e,t,i){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,i)}function a(e,i,n){return e.set(t(e,i),n),n}function o(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l,c={SESSIONS:"sessions",EVENTS:"events",VIEWS:"views",SCROLLS:"scrolls",CLICKS:"clicks",FORMS:"forms",CRASHES:"crashes",ATTRIBUTION:"attribution",USERS:"users",STAR_RATING:"star-rating",LOCATION:"location",APM:"apm",FEEDBACK:"feedback",REMOTE_CONFIG:"remote-config"},s={NPS:"[CLY]_nps",SURVEY:"[CLY]_survey",STAR_RATING:"[CLY]_star_rating",VIEW:"[CLY]_view",ORIENTATION:"[CLY]_orientation",ACTION:"[CLY]_action"},d=Object.values(s),u={ERROR:"[ERROR] ",WARNING:"[WARNING] ",INFO:"[INFO] ",DEBUG:"[DEBUG] ",VERBOSE:"[VERBOSE] "},g={DEVELOPER_SUPPLIED:0,SDK_GENERATED:1,TEMPORARY_ID:2,URL_PROVIDED:3},p={BEAT_INTERVAL:500,QUEUE_SIZE:1e3,FAIL_TIMEOUT_AMOUNT:60,INACTIVITY_TIME:20,SESSION_UPDATE:60,MAX_EVENT_BATCH:100,SESSION_COOKIE_TIMEOUT:30,MAX_KEY_LENGTH:128,MAX_VALUE_SIZE:256,MAX_SEGMENTATION_VALUES:100,MAX_BREADCRUMB_COUNT:100,MAX_STACKTRACE_LINES_PER_THREAD:30,MAX_STACKTRACE_LINE_LENGTH:200},f={BOOMERANG_SRC:"https://cdn.jsdelivr.net/npm/countly-sdk-web@latest/plugin/boomerang/boomerang.min.js",CLY_BOOMERANG_SRC:"https://cdn.jsdelivr.net/npm/countly-sdk-web@latest/plugin/boomerang/countly_boomerang.js"},h=Object.freeze({errorCount:"cly_hc_error_count",warningCount:"cly_hc_warning_count",statusCode:"cly_hc_status_code",errorMessage:"cly_hc_error_message",backoffCount:"cly_hc_backoff_count",consecutiveBackoffCount:"cly_hc_consecutive_backoff_count"}),_="25.4.1",v="javascript_native_web",m=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,y="undefined"!=typeof window,w=globalThis.Countly||{};function k(e){var t=[];if(void 0!==e.options)for(var i=0;i<e.options.length;i++)e.options[i].selected&&t.push(e.options[i].value);return t.join(", ")}function b(){var e="xxxxxxxx";return(e=R(e,"[x]"))+Date.now().toString()}function E(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return R(e,"[xy]")}function R(e,t){var i=new Date().getTime(),n=RegExp(t,"g");return e.replace(n,function(e){var t=(i+16*Math.random())%16|0;return("x"===e?t:3&t|8).toString(16)})}function N(){return Math.floor(new Date().getTime()/1e3)}var I=0;function O(){var e=new Date().getTime();return I>=e?I++:I=e,I}function S(e,t,i){if(t&&Object.keys(t).length){if(void 0!==t[e])return t[e]}else if(void 0!==w[e])return w[e];return i}function W(e,t,i){for(var n in w.i)w.i[n].tracking_crashes&&w.i[n].recordError(e,t,i)}function D(e,t){var i=[];for(var n in e)i.push(n+"="+encodeURIComponent(e[n]));var a=i.join("&");return t?B(a,t).then(function(e){return a+="&checksum256="+e}):Promise.resolve(a)}function A(e){return"string"==typeof e&&"/"===e.substring(e.length-1)?e.substring(0,e.length-1):e}function C(e,t){for(var i,n={},a=0,o=t.length;a<o;a++)void 0!==e[i=t[a]]&&(n[i]=e[i]);return n}function M(e,t,i,n,a,o){var r={};if(e){if(Object.keys(e).length>n){var l={},c=0;for(var s in e)c<n&&(l[s]=e[s],c++);e=l}for(var d in e){var u=T(d,t,a,o),g=T(e[d],i,a,o);r[u]=g}}return r}function T(e,t,i,n){var a=e;return"number"==typeof e&&(e=e.toString()),"string"==typeof e&&e.length>t&&(a=e.substring(0,t),n(u.DEBUG,i+", Key: [ "+e+" ] is longer than accepted length. It will be truncated.")),a}function B(e,t){var i=new TextEncoder().encode(e+t);return crypto.subtle.digest("SHA-256",i).then(function(e){return Array.from(new Uint8Array(e)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")})}function G(e,t,i){if(y){if(null==e){X()&&console.warn("[WARNING] [Countly] add_event_listener, Can't bind ["+t+"] event to nonexisting element");return}void 0!==e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)}}function U(e){return e?void 0!==e.target?e.target:e.srcElement:window.event.srcElement}function x(e){if(e)return e;var t=navigator.userAgent;return t||(t=F()),t}function F(e){if(e)return e;var t="";return navigator.userAgentData&&(t=navigator.userAgentData.brands.map(function(e){return e.brand+":"+e.version}).join()+(navigator.userAgentData.mobile?" mobi ":" ")+navigator.userAgentData.platform),t}function L(e){if(e)t=e;else{if(navigator.userAgentData&&navigator.userAgentData.mobile)return"phone";t=x()}var t=t.toLowerCase(),i="desktop";return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?i="tablet":/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(t)&&(i="phone"),i}function P(e){var t=/(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome|Lighthouse)/;if(e)return t.test(e);var i=t.test(x()),n=t.test(F());return i||n}function z(e){return void 0===e.pageY&&"number"==typeof e.clientX&&document.documentElement&&(e.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),e}function q(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function V(){var e=document;return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function j(){var e=document;return Math.min(Math.min(e.body.clientHeight,e.documentElement.clientHeight),Math.min(e.body.offsetHeight,e.documentElement.offsetHeight),window.innerHeight)}function H(e,t,i,n,a,o){var r,l=document.createElement(e);l.setAttribute(t,i),l.setAttribute(n,a);var c=function(){r||o(),r=!0};o&&(l.onreadystatechange=c,l.onload=c),document.getElementsByTagName("head")[0].appendChild(l)}function J(e,t){H("script","type","text/javascript","src",e,t)}function Y(e,t){H("link","rel","stylesheet","href",e,t)}function K(){if(y){var e=document.getElementById("cly-loader");if(!e){var t="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}",i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),i.appendChild(n),(e=document.createElement("div")).setAttribute("id","cly-loader"),window.addEventListener("load",function(){if(w.showLoaderProtection){X()&&console.warn("[WARNING] [Countly] showLoader, Loader is already on");return}try{document.body.appendChild(e)}catch(e){X()&&console.error("[ERROR] [Countly] showLoader, Body is not loaded for loader to append: "+e)}})}e.style.display="block"}}function X(){return!!w&&!!w.debug&&"undefined"!=typeof console}function Q(){if(y){w.showLoaderProtection=!0;var e=document.getElementById("cly-loader");e&&(e.style.display="none")}}var Z=new WeakMap,$=new WeakMap,ee=new WeakMap,et=new WeakMap,ei=new WeakMap,en=new WeakMap,ea=new WeakMap,eo=new WeakMap,er=new WeakMap,el=new WeakMap,ec=new WeakMap,es=new WeakMap,ed=new WeakMap,eu=new WeakMap,eg=new WeakMap,ep=new WeakMap,ef=new WeakMap,eh=new WeakMap,e_=new WeakMap,ev=new WeakMap,em=new WeakMap,ey=new WeakMap,ew=new WeakMap,ek=new WeakMap,eb=new WeakMap,eE=new WeakMap,eR=new WeakMap,eN=new WeakMap,eI=new WeakMap,eO=new WeakMap,eS=new WeakMap,eW=new WeakMap,eD=new WeakMap,eA=new WeakMap,eC=new WeakMap,eM=new WeakMap,eT=new WeakMap,eB=new WeakMap,eG=new WeakMap,eU=new WeakMap,ex=new WeakMap,eF=new WeakMap,eL=new WeakMap,eP=new WeakMap,ez=new WeakMap,eq=new WeakMap,eV=new WeakMap,ej=new WeakMap,eH=new WeakMap,eJ=new WeakMap,eY=new WeakMap,eK=new WeakMap,eX=new WeakMap,eQ=new WeakMap,eZ=new WeakMap,e$=new WeakMap,e0=new WeakMap,e1=new WeakMap,e2=new WeakMap,e3=new WeakMap,e4=new WeakMap,e5=new WeakMap,e6=new WeakMap,e9=new WeakMap,e8=new WeakMap,e7=new WeakMap,te=new WeakMap,tt=new WeakMap,ti=new WeakMap,tn=new WeakMap,ta=new WeakMap,to=new WeakMap,tr=new WeakMap,tl=new WeakMap,tc=new WeakMap,ts=new WeakMap,td=new WeakMap,tu=new WeakMap,tg=new WeakMap,tp=new WeakMap,tf=new WeakMap,th=new WeakMap,t_=new WeakMap,tv=new WeakMap,tm=new WeakMap,ty=new WeakMap,tw=new WeakMap,tk=new WeakMap,tb=new WeakMap,tE=new WeakMap,tR=new WeakMap,tN=new WeakMap,tI=new WeakMap,tO=new WeakMap,tS=new WeakMap,tW=new WeakMap,tD=new WeakMap,tA=new WeakMap,tC=new WeakMap,tM=new WeakMap,tT=new WeakMap,tB=new WeakMap,tG=new WeakMap,tU=new WeakMap,tx=new WeakMap,tF=new WeakMap,tL=new WeakMap,tP=new WeakMap,tz=new WeakMap,tq=new WeakMap,tV=new WeakMap,tj=new WeakMap,tH=new WeakMap,tJ=new WeakMap,tY=new WeakMap,tK=new WeakMap,tX=new WeakMap,tQ=new WeakMap,tZ=new WeakMap,t$=new WeakMap,t0=new WeakMap,t1=new WeakMap,t2=new WeakMap,t3=new WeakMap,t4=new WeakMap,t5=new WeakMap,t6=new WeakMap,t9=new WeakMap,t8=new WeakMap,t7=new WeakMap,ie=new WeakMap,it=new WeakMap,ii=new WeakMap,ia=new WeakMap,io=new WeakMap,ir=new WeakMap,il=new WeakMap,ic=new WeakMap,is=new WeakMap,id=new WeakMap,iu=new WeakMap,ig=new WeakMap,ip=new WeakMap,ih=new WeakMap,i_=new WeakMap,iv=new WeakMap,im=new WeakMap,iy=new WeakMap,iw=new WeakMap,ik=new WeakMap,ib=(Object.defineProperty(l=function e(t){var l=this;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");n(this,Z,void 0),n(this,$,void 0),n(this,ee,void 0),n(this,et,void 0),n(this,ei,void 0),n(this,en,void 0),n(this,ea,void 0),n(this,eo,void 0),n(this,er,void 0),n(this,el,void 0),n(this,ec,void 0),n(this,es,void 0),n(this,ed,void 0),n(this,eu,void 0),n(this,eg,void 0),n(this,ep,void 0),n(this,ef,void 0),n(this,eh,void 0),n(this,e_,void 0),n(this,ev,void 0),n(this,em,void 0),n(this,ey,void 0),n(this,ew,void 0),n(this,ek,void 0),n(this,eb,void 0),n(this,eE,void 0),n(this,eR,void 0),n(this,eN,void 0),n(this,eI,void 0),n(this,eO,void 0),n(this,eS,void 0),n(this,eW,void 0),n(this,eD,void 0),n(this,eA,void 0),n(this,eC,void 0),n(this,eM,void 0),n(this,eT,void 0),n(this,eB,void 0),n(this,eG,void 0),n(this,eU,void 0),n(this,ex,void 0),n(this,eF,void 0),n(this,eL,void 0),n(this,eP,void 0),n(this,ez,void 0),n(this,eq,void 0),n(this,eV,void 0),n(this,ej,void 0),n(this,eH,void 0),n(this,eJ,void 0),n(this,eY,void 0),n(this,eK,void 0),n(this,eX,void 0),n(this,eQ,void 0),n(this,eZ,void 0),n(this,e$,void 0),n(this,e0,void 0),n(this,e1,void 0),n(this,e2,void 0),n(this,e3,void 0),n(this,e4,void 0),n(this,e5,void 0),n(this,e6,void 0),n(this,e9,void 0),n(this,e8,void 0),n(this,e7,void 0),n(this,te,void 0),n(this,tt,void 0),n(this,ti,void 0),n(this,tn,void 0),n(this,ta,void 0),n(this,to,void 0),n(this,tr,void 0),n(this,tl,void 0),n(this,tc,void 0),n(this,ts,void 0),n(this,td,void 0),n(this,tu,void 0),n(this,tg,void 0),n(this,tp,void 0),n(this,tf,void 0),n(this,th,void 0),n(this,t_,void 0),n(this,tv,void 0),n(this,tm,void 0),n(this,ty,void 0),n(this,tw,void 0),n(this,tk,void 0),n(this,tb,function(){if("[CLY]_temp_id"===l.device_id)return void i(t9,l).call(l,u.INFO,"server_config, Device ID is temporary, not fetching server config");if(i(tf,l))return void i(t9,l).call(l,u.INFO,"server_config, SDK behavior sync is disabled, not fetching server config");i(t9,l).call(l,u.INFO,"server_config, Fetching server config");var e={};e.app_key=l.app_key,e.device_id=l.device_id,e.sdk_version=i(eL,l),e.sdk_name=i(eF,l),e.t=i(eC,l),e.timestamp=O();var t=new Date;e.hour=t.getHours(),e.dow=t.getDay(),e.av=l.app_version,e.method="sc",i(t8,l).call(l,"server_config",l.url+i(en,l),e,function(e,t,n){if(!e)try{var a=JSON.parse(n);i(t9,l).call(l,u.INFO,"server_config, Config fetched successfully:["+JSON.stringify(a)+"]"),a&&i(tE,l).call(l,a),i(ih,l).call(l,"cly_config",JSON.stringify(a))}catch(e){i(t9,l).call(l,u.ERROR,"server_config, Had an issue while parsing the response: "+e)}},!0,!0),setTimeout(function(){i(tb,l).call(l)},60*i(e1,l)*6e4)}),n(this,tE,function(e){if(e&&e.c&&"object"===r(e.c)){var t=e.c;t.hasOwnProperty("networking")&&a(eX,l,t.networking),t.hasOwnProperty("tracking")&&a(e2,l,t.tracking),t.hasOwnProperty("rqs")&&a(eQ,l,t.rqs),t.hasOwnProperty("eqs")&&a(eZ,l,t.eqs),t.hasOwnProperty("sui")&&a(e$,l,t.sui),t.hasOwnProperty("czi")&&t.czi>14&&a(e0,l,1e3*t.czi),t.hasOwnProperty("ecz")&&(a(e8,l,t.ecz),!i(tg,l)&&i(e8,l)&&i(tB,l).call(l)),t.hasOwnProperty("cr")&&a(e7,l,t.cr),t.hasOwnProperty("st")&&a(e3,l,t.st),t.hasOwnProperty("crt")&&a(e5,l,t.crt),t.hasOwnProperty("vt")&&a(e4,l,t.vt),t.hasOwnProperty("cet")&&a(e6,l,t.cet),t.hasOwnProperty("lkl")&&a(tt,l,t.lkl),t.hasOwnProperty("lvs")&&a(ti,l,t.lvs),t.hasOwnProperty("lsv")&&a(tn,l,t.lsv),t.hasOwnProperty("lbc")&&a(ta,l,t.lbc),t.hasOwnProperty("ltlpt")&&a(to,l,t.ltlpt),t.hasOwnProperty("ltl")&&a(tr,l,t.ltl),t.hasOwnProperty("scui")&&a(e1,l,Math.max(t.scui,4)),t.hasOwnProperty("lt")&&a(e9,l,t.lt),t.hasOwnProperty("rcz")&&a(te,l,t.rcz),t.hasOwnProperty("bom")&&a(tl,l,t.bom),t.hasOwnProperty("bom_at")&&a(tc,l,t.bom_at),t.hasOwnProperty("bom_rqp")&&a(ts,l,t.bom_rqp),t.hasOwnProperty("bom_ra")&&a(td,l,t.bom_ra),t.hasOwnProperty("bom_d")&&a(tu,l,t.bom_d)}}),n(this,tR,function(e){if(a(ed,l,S("ignore_referrers",e,[])),a(ey,l,S("fail_timeout",e,p.FAIL_TIMEOUT_AMOUNT)),a(ew,l,S("inactivity_time",e,p.INACTIVITY_TIME)),a(eb,l,S("use_session_cookie",e,!0)),a(eE,l,S("session_cookie_timeout",e,p.SESSION_COOKIE_TIMEOUT)),a(eI,l,S("offline_mode",e,!1)),a(eF,l,S("sdk_name",e,v)),a(eL,l,S("sdk_version",e,_)),a(ea,l,S("interval",e,p.BEAT_INTERVAL)),l.getViewName=S("getViewName",e,w.getViewName),l.getViewUrl=S("getViewUrl",e,w.getViewUrl),l.getSearchQuery=S("getSearchQuery",e,w.getSearchQuery),l.DeviceIdType=w.DeviceIdType,l.namespace=S("namespace",e,""),l.clearStoredId=S("clear_stored_id",e,!1),l.onload=S("onload",e,[]),l.utm=S("utm",e,{source:!0,medium:!0,campaign:!0,term:!0,content:!0}),l.ignore_prefetch=S("ignore_prefetch",e,!0),l.rcAutoOptinAb=S("rc_automatic_optin_for_ab",e,!0),l.useExplicitRcApi=S("use_explicit_rc_api",e,!1),l.debug=S("debug",e,!1),l.test_mode=S("test_mode",e,!1),l.test_mode_eq=S("test_mode_eq",e,!1),l.metrics=S("metrics",e,{}),l.headers=S("headers",e,{}),l.app_version=S("app_version",e,"0.0"),l.country_code=S("country_code",e,null),l.city=S("city",e,null),l.ip_address=S("ip_address",e,null),l.ignore_bots=S("ignore_bots",e,!0),l.force_post=S("force_post",e,!1),l.remote_config=S("remote_config",e,!1),l.ignore_visitor=S("ignore_visitor",e,!1),l.track_domains=y?S("track_domains",e,!0):void 0,l.storage=S("storage",e,"default"),l.enableOrientationTracking=y?S("enable_orientation_tracking",e,!0):void 0,l.heatmapWhitelist=S("heatmap_whitelist",e,[]),l.contentWhitelist=S("content_whitelist",e,[]),l.salt=S("salt",e,null),l.hcErrorCount=i(ip,l).call(l,h.errorCount)||0,l.hcWarningCount=i(ip,l).call(l,h.warningCount)||0,l.hcStatusCode=i(ip,l).call(l,h.statusCode)||-1,l.hcErrorMessage=i(ip,l).call(l,h.errorMessage)||"",l.hcBackoffCount=i(ip,l).call(l,h.backoffCount)||0,l.hcConsecutiveBackoffCount=i(ip,l).call(l,h.consecutiveBackoffCount)||0,a(ty,l,!1),a(eY,l,S("crash_filter_callback",e,null)),"cookie"===l.storage&&a(eD,l,!1),l.rcAutoOptinAb||l.useExplicitRcApi||(i(t9,l).call(l,u.WARNING,"initialize, Auto opting is disabled, switching to explicit RC API"),l.useExplicitRcApi=!0),Array.isArray(i(ed,l))||a(ed,l,[]),""===l.url&&(i(t9,l).call(l,u.ERROR,"initialize, Please provide server URL"),l.ignore_visitor=!0),i(ip,l).call(l,"cly_ignore")&&(l.ignore_visitor=!0),i(tT,l).call(l),y){if(window.name&&0===window.name.indexOf("cly:"))try{l.passed_data=JSON.parse(window.name.replace("cly:",""))}catch(e){i(t9,l).call(l,u.ERROR,"initialize, Could not parse name: "+window.name+", error: "+e)}else if(location.hash&&0===location.hash.indexOf("this.#cly:"))try{l.passed_data=JSON.parse(location.hash.replace("this.#cly:",""))}catch(e){i(t9,l).call(l,u.ERROR,"initialize, Could not parse hash: "+location.hash+", error: "+e)}}if(Array.isArray(l.contentWhitelist)&&(l.contentWhitelist.push(l.url),l.contentWhitelist=l.contentWhitelist.map(function(e){return A(e)})),(l.passed_data&&l.passed_data.app_key&&l.passed_data.app_key===l.app_key||l.passed_data&&!l.passed_data.app_key&&i(ee,l))&&l.passed_data.token&&l.passed_data.purpose){l.passed_data.token!==i(ip,l).call(l,"cly_old_token")&&(i(il,l).call(l,l.passed_data.token),i(ih,l).call(l,"cly_old_token",l.passed_data.token));var t=[];Array.isArray(l.heatmapWhitelist)?(l.heatmapWhitelist.push(l.url),t=l.heatmapWhitelist.map(function(e){return A(e)})):t=[l.url],t.includes(l.passed_data.url)&&"heatmap"===l.passed_data.purpose&&(l.ignore_visitor=!0,K(),J(l.passed_data.url+"/views/heatmap.js",Q))}if(l.ignore_visitor)return void i(t9,l).call(l,u.WARNING,"initialize, ignore_visitor:["+l.ignore_visitor+"], this user will not be tracked");i(iv,l).call(l),a(eo,l,i(ip,l).call(l,"cly_queue")||[]),a(er,l,i(ip,l).call(l,"cly_event")||[]),a(el,l,i(ip,l).call(l,"cly_remote_configs")||{});var n="[CLY]_temp_id"===i(ip,l).call(l,"cly_id");l.clearStoredId&&(i(ip,l).call(l,"cly_id")&&!n&&(l.device_id=i(ip,l).call(l,"cly_id"),i(t9,l).call(l,u.DEBUG,"initialize, temporarily using the previous device ID to flush existing events"),a(eC,l,i(ip,l).call(l,"cly_id_type")),i(eC,l)||(i(t9,l).call(l,u.DEBUG,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED, for event flushing"),a(eC,l,g.DEVELOPER_SUPPLIED)),i(tq,l).call(l),l.device_id=void 0,a(eC,l,g.SDK_GENERATED)),i(t9,l).call(l,u.INFO,"initialize, Clearing the device ID storage"),i(i_,l).call(l,"cly_id"),i(i_,l).call(l,"cly_id_type"),i(i_,l).call(l,"cly_session"),n=!1),i(eF,l)===v&&i(eL,l)===_?i(t9,l).call(l,u.DEBUG,"initialize, SDK name:["+i(eF,l)+"], version:["+i(eL,l)+"]"):i(t9,l).call(l,u.DEBUG,"initialize, SDK name:["+i(eF,l)+"], version:["+i(eL,l)+"], default name:["+v+"] and default version:["+_+"]"),i(t9,l).call(l,u.DEBUG,"initialize, stored server config:["+JSON.stringify(i(eK,l))+"]"),i(t9,l).call(l,u.DEBUG,"initialize, app_key:["+l.app_key+"], url:["+l.url+"]"),i(t9,l).call(l,u.DEBUG,"initialize, device_id:["+S("device_id",e,void 0)+"]"),i(t9,l).call(l,u.DEBUG,"initialize, require_consent is enabled:["+i(e7,l)+"]");try{i(t9,l).call(l,u.DEBUG,"initialize, metric override:["+JSON.stringify(l.metrics)+"]"),i(t9,l).call(l,u.DEBUG,"initialize, header override:["+JSON.stringify(l.headers)+"]"),i(t9,l).call(l,u.DEBUG,"initialize, number of onload callbacks provided:["+l.onload.length+"]"),i(t9,l).call(l,u.DEBUG,"initialize, utm tags:["+JSON.stringify(l.utm)+"]"),i(ed,l)&&i(t9,l).call(l,u.DEBUG,"initialize, referrers to ignore :["+JSON.stringify(i(ed,l))+"]"),i(t9,l).call(l,u.DEBUG,"initialize, salt given:["+!!l.salt+"]")}catch(e){i(t9,l).call(l,u.ERROR,"initialize, Could not stringify some config object values")}i(t9,l).call(l,u.DEBUG,"initialize, app_version:["+l.app_version+"]"),i(t9,l).call(l,u.DEBUG,"initialize, provided location info; country_code:["+l.country_code+"], city:["+l.city+"], ip_address:["+l.ip_address+"]"),""!==l.namespace&&i(t9,l).call(l,u.DEBUG,"initialize, namespace given:["+l.namespace+"]"),l.clearStoredId&&i(t9,l).call(l,u.DEBUG,"initialize, clearStoredId flag set to:["+l.clearStoredId+"]"),l.ignore_prefetch&&i(t9,l).call(l,u.DEBUG,"initialize, ignoring pre-fetching and pre-rendering from counting as real website visits :["+l.ignore_prefetch+"]"),l.test_mode&&i(t9,l).call(l,u.WARNING,"initialize, test_mode:["+l.test_mode+"], request queue won't be processed"),l.test_mode_eq&&i(t9,l).call(l,u.WARNING,"initialize, test_mode_eq:["+l.test_mode_eq+"], event queue won't be processed"),l.heatmapWhitelist&&i(t9,l).call(l,u.DEBUG,"initialize, heatmap whitelist:["+JSON.stringify(l.heatmapWhitelist)+"], these domains will be whitelisted"),"default"!==l.storage&&i(t9,l).call(l,u.DEBUG,"initialize, storage is set to:["+l.storage+"]"),l.ignore_bots&&i(t9,l).call(l,u.DEBUG,"initialize, ignore traffic from bots :["+l.ignore_bots+"]"),l.force_post&&i(t9,l).call(l,u.DEBUG,"initialize, forced post method for all requests:["+l.force_post+"]"),l.remote_config&&i(t9,l).call(l,u.DEBUG,"initialize, remote_config callback provided:["+!!l.remote_config+"]"),"boolean"==typeof l.rcAutoOptinAb&&i(t9,l).call(l,u.DEBUG,"initialize, automatic RC optin is enabled:["+l.rcAutoOptinAb+"]"),l.useExplicitRcApi||i(t9,l).call(l,u.WARNING,"initialize, will use legacy RC API. Consider enabling new API during init with use_explicit_rc_api flag"),l.track_domains&&i(t9,l).call(l,u.DEBUG,"initialize, tracking domain info:["+l.track_domains+"]"),l.enableOrientationTracking&&i(t9,l).call(l,u.DEBUG,"initialize, enableOrientationTracking:["+l.enableOrientationTracking+"]"),i(eb,l)||i(t9,l).call(l,u.WARNING,"initialize, use_session_cookie is enabled:["+i(eb,l)+"]"),i(eI,l)&&i(t9,l).call(l,u.DEBUG,"initialize, offline_mode:["+i(eI,l)+"], user info won't be send to the servers"),i(el,l)&&i(t9,l).call(l,u.DEBUG,"initialize, stored remote configs:["+JSON.stringify(i(el,l))+"]"),i(e0,l)&&i(t9,l).call(l,u.DEBUG,"initialize, content_zone_timer_interval:["+i(e0,l)+"]"),i(t9,l).call(l,u.DEBUG,"initialize, 'getViewName' callback override provided:["+(l.getViewName!==w.getViewName)+"]"),i(t9,l).call(l,u.DEBUG,"initialize, 'getSearchQuery' callback override provided:["+(l.getSearchQuery!==w.getSearchQuery)+"]"),i(tt,l)!==p.MAX_KEY_LENGTH&&i(t9,l).call(l,u.DEBUG,"initialize, maxKeyLength set to:["+i(tt,l)+"] characters"),i(ti,l)!==p.MAX_VALUE_SIZE&&i(t9,l).call(l,u.DEBUG,"initialize, maxValueSize set to:["+i(ti,l)+"] characters"),i(tn,l)!==p.MAX_SEGMENTATION_VALUES&&i(t9,l).call(l,u.DEBUG,"initialize, maxSegmentationValues set to:["+i(tn,l)+"] key/value pairs"),i(ta,l)!==p.MAX_BREADCRUMB_COUNT&&i(t9,l).call(l,u.DEBUG,"initialize, maxBreadcrumbCount for custom logs set to:["+i(ta,l)+"] entries"),i(to,l)!==p.MAX_STACKTRACE_LINES_PER_THREAD&&i(t9,l).call(l,u.DEBUG,"initialize, maxStackTraceLinesPerThread set to:["+i(to,l)+"] lines"),i(tr,l)!==p.MAX_STACKTRACE_LINE_LENGTH&&i(t9,l).call(l,u.DEBUG,"initialize, maxStackTraceLineLength set to:["+i(tr,l)+"] characters"),i(ea,l)!==p.BEAT_INTERVAL&&i(t9,l).call(l,u.DEBUG,"initialize, interval for heartbeats set to:["+i(ea,l)+"] milliseconds"),i(eQ,l)!==p.QUEUE_SIZE&&i(t9,l).call(l,u.DEBUG,"initialize, queue_size set to:["+i(eQ,l)+"] items max"),i(ey,l)!==p.FAIL_TIMEOUT_AMOUNT&&i(t9,l).call(l,u.DEBUG,"initialize, fail_timeout set to:["+i(ey,l)+"] seconds of wait time after a failed connection to server"),i(ew,l)!==p.INACTIVITY_TIME&&i(t9,l).call(l,u.DEBUG,"initialize, inactivity_time set to:["+i(ew,l)+"] minutes to consider a user as inactive after no observable action"),i(e$,l)!==p.SESSION_UPDATE&&i(t9,l).call(l,u.DEBUG,"initialize, session_update set to:["+i(e$,l)+"] seconds to check if extending a session is needed while the user is active"),i(eZ,l)!==p.MAX_EVENT_BATCH&&i(t9,l).call(l,u.DEBUG,"initialize, max_events set to:["+i(eZ,l)+"] events to send in one batch"),i(eE,l)!==p.SESSION_COOKIE_TIMEOUT&&i(t9,l).call(l,u.DEBUG,"initialize, session_cookie_timeout set to:["+i(eE,l)+"] minutes to expire a cookies session");var o=null,r=l.getSearchQuery(),c=!1,s={};if(r){0===r.indexOf("?")&&(r=r.substring(1));for(var d=r.split("&"),f=0;f<d.length;f++){var m=d[f].split("=");"cly_id"===m[0]?i(ih,l).call(l,"cly_cmp_id",m[1]):"cly_uid"===m[0]?i(ih,l).call(l,"cly_cmp_uid",m[1]):"cly_device_id"===m[0]?o=m[1]:0===(m[0]+"").indexOf("utm_")&&l.utm[m[0].replace("utm_","")]&&(s[m[0].replace("utm_","")]=m[1],c=!0)}}var k=S("device_id",e,void 0);if("number"==typeof k&&(k=k.toString()),i(ip,l).call(l,"cly_id")&&!n?(l.device_id=i(ip,l).call(l,"cly_id"),i(t9,l).call(l,u.INFO,"initialize, Set the stored device ID"),a(eC,l,i(ip,l).call(l,"cly_id_type")),i(eC,l)||(i(t9,l).call(l,u.INFO,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED"),a(eC,l,g.DEVELOPER_SUPPLIED)),a(eI,l,!1)):null!==o?(i(t9,l).call(l,u.INFO,"initialize, Device ID set by URL"),l.device_id=o,a(eC,l,g.URL_PROVIDED),a(eI,l,!1)):k?(i(t9,l).call(l,u.INFO,"initialize, Device ID set by developer"),l.device_id=k,e&&Object.keys(e).length?void 0!==e.device_id&&a(eC,l,g.DEVELOPER_SUPPLIED):void 0!==w.device_id&&a(eC,l,g.DEVELOPER_SUPPLIED),a(eI,l,!1)):i(eI,l)||n?(l.device_id="[CLY]_temp_id",a(eC,l,g.TEMPORARY_ID),i(eI,l)&&n?i(t9,l).call(l,u.INFO,"initialize, Temp ID set, continuing offline mode from previous app session"):i(eI,l)&&!n?i(t9,l).call(l,u.INFO,"initialize, Temp ID set, entering offline mode"):(a(eI,l,!0),i(t9,l).call(l,u.INFO,"initialize, Temp ID set, enabling offline mode"))):(i(t9,l).call(l,u.INFO,"initialize, Generating the device ID"),l.device_id=S("device_id",e,i(t1,l).call(l)),e&&Object.keys(e).length?void 0!==e.device_id&&a(eC,l,g.DEVELOPER_SUPPLIED):void 0!==w.device_id&&a(eC,l,g.DEVELOPER_SUPPLIED)),i(ih,l).call(l,"cly_id",l.device_id),i(ih,l).call(l,"cly_id_type",i(eC,l)),c){for(var b in a(ex,l,{}),l.utm)s[b]?(l.userData.set("utm_"+b,s[b]),i(ex,l)[b]=s[b]):l.userData.unset("utm_"+b);l.userData.save()}i(tb,l).call(l)}),n(this,tN,function(){i(Z,l)&&(clearTimeout(i(Z,l)),a(Z,l,null)),a(Z,l,setTimeout(function(){for(var e={},t=0;t<w.features.length;t++)!0===i(ez,l)[w.features[t]].optin?e[w.features[t]]=!0:e[w.features[t]]=!1;i(tX,l).call(l,{consent:JSON.stringify(e)}),i(t9,l).call(l,u.DEBUG,"Consent update request has been sent to the queue.")},1e3))}),o(this,"halt",function(){i(t9,l).call(l,u.WARNING,"halt, Resetting Countly"),w.i=void 0,w.q=[],w.noHeartBeat=void 0,a(ee,l,!w.i),a(et,l,!1),a(ei,l,"/i"),a(en,l,"/o/sdk"),a(ea,l,500),a(eQ,l,1e3),a(eo,l,[]),a(er,l,[]),a(el,l,{}),a(ec,l,[]),a(es,l,{}),a(ed,l,[]),a(eu,l,null),a(eg,l,!0),a(ef,l,0),a(eh,l,null),a(e_,l,0),a(ev,l,0),a(em,l,0),a(ey,l,60),a(ew,l,20),a(ek,l,0),a(e$,l,60),a(eZ,l,100),a(eb,l,!0),a(eE,l,30),a(eR,l,!0),a(eN,l,!1),a(eI,l,!1),a(eO,l,{}),a(eS,l,!0),a(eW,l,N()),a(eD,l,!0),a(eA,l,null),a(eC,l,g.SDK_GENERATED),a(eM,l,!1),a(eT,l,0),a(eB,l,!1),a(eG,l,null),a(eU,l,null),a(ex,l,null),a(eq,l,[]);try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal"),localStorage.removeItem("cly_old_token"),localStorage.removeItem("cly_cmp_id"),localStorage.removeItem("cly_cmp_uid"),localStorage.removeItem("cly_id"),localStorage.removeItem("cly_id_type"),localStorage.removeItem("cly_queue"),localStorage.removeItem("cly_session"),localStorage.removeItem("cly_remote_configs"),localStorage.removeItem("cly_event"),localStorage.removeItem("cly_ignore"),localStorage.removeItem("cly_fb_widgets"),localStorage.removeItem("cly_token"),localStorage.removeItem("cly_hc_error_count"),localStorage.removeItem("cly_hc_warning_count"),localStorage.removeItem("cly_hc_status_code"),localStorage.removeItem("cly_hc_error_message"),localStorage.removeItem("cly_hc_backoff_count"),localStorage.removeItem("cly_hc_consecutive_backoff_count")}catch(e){i(t9,l).call(l,u.ERROR,"halt, Local storage test failed, will fallback to cookies"),a(eD,l,!1)}w.features=[c.SESSIONS,c.EVENTS,c.VIEWS,c.SCROLLS,c.CLICKS,c.FORMS,c.CRASHES,c.ATTRIBUTION,c.USERS,c.STAR_RATING,c.LOCATION,c.APM,c.FEEDBACK,c.REMOTE_CONFIG],a(ez,l,{});for(var e=0;e<w.features.length;e++)i(ez,l)[w.features[e]]={};l.app_key=void 0,l.device_id=void 0,l.onload=void 0,l.utm=void 0,l.ignore_prefetch=void 0,l.debug=void 0,l.test_mode=void 0,l.test_mode_eq=void 0,l.metrics=void 0,l.headers=void 0,l.url=void 0,l.app_version=void 0,l.country_code=void 0,l.city=void 0,l.ip_address=void 0,l.ignore_bots=void 0,l.force_post=void 0,l.rcAutoOptinAb=void 0,l.useExplicitRcApi=void 0,l.remote_config=void 0,l.ignore_visitor=void 0,a(e7,l,void 0),l.track_domains=void 0,l.storage=void 0,l.enableOrientationTracking=void 0,l.salt=void 0,a(tt,l,void 0),a(ti,l,void 0),a(tn,l,void 0),a(ta,l,void 0),a(to,l,void 0),a(tr,l,void 0)}),o(this,"group_features",function(e){if(i(t9,l).call(l,u.INFO,"group_features, Grouping features"),e)for(var t in e)i(ez,l)[t]?i(t9,l).call(l,u.WARNING,"group_features, Feature name ["+t+"] is already reserved"):"string"==typeof e[t]?i(ez,l)[t]={features:[e[t]]}:e[t]&&Array.isArray(e[t])&&e[t].length?i(ez,l)[t]={features:e[t]}:i(t9,l).call(l,u.ERROR,"group_features, Incorrect feature list for ["+t+"] value: ["+e[t]+"]");else i(t9,l).call(l,u.ERROR,"group_features, Incorrect features:["+e+"]")}),o(this,"check_consent",function(e){return(i(t9,l).call(l,u.INFO,"check_consent, Checking if consent is given for specific feature:["+e+"]"),i(e7,l))?i(ez,l)[e]?!!(i(ez,l)[e]&&i(ez,l)[e].optin):(i(t9,l).call(l,u.ERROR,"check_consent, No feature available for ["+e+"]"),!1):(i(t9,l).call(l,u.INFO,"check_consent, require_consent is off, no consent is necessary"),!0)}),o(this,"get_device_id_type",function(){var e;switch(i(t9,l).call(l,u.INFO,"check_device_id_type, Retrieving the current device id type.["+i(eC,l)+"]"),i(eC,l)){case g.SDK_GENERATED:e=l.DeviceIdType.SDK_GENERATED;break;case g.URL_PROVIDED:case g.DEVELOPER_SUPPLIED:e=l.DeviceIdType.DEVELOPER_SUPPLIED;break;case g.TEMPORARY_ID:e=l.DeviceIdType.TEMPORARY_ID;break;default:e=-1}return e}),o(this,"get_device_id",function(){return i(t9,l).call(l,u.INFO,"get_device_id, Retrieving the device id: ["+l.device_id+"]"),l.device_id}),o(this,"check_any_consent",function(){if(i(t9,l).call(l,u.INFO,"check_any_consent, Checking if any consent is given"),!i(e7,l))return i(t9,l).call(l,u.INFO,"check_any_consent, require_consent is off, no consent is necessary"),!0;for(var e in i(ez,l))if(i(ez,l)[e]&&i(ez,l)[e].optin)return!0;return i(t9,l).call(l,u.INFO,"check_any_consent, No consents given"),!1}),o(this,"add_consent",function(e){if(i(t9,l).call(l,u.INFO,"add_consent, Adding consent for ["+e+"]"),Array.isArray(e))for(var t=0;t<e.length;t++)l.add_consent(e[t]);else i(ez,l)[e]?i(ez,l)[e].features?(i(ez,l)[e].optin=!0,l.add_consent(i(ez,l)[e].features)):!0!==i(ez,l)[e].optin&&(i(ez,l)[e].optin=!0,i(tN,l).call(l),setTimeout(function(){e===c.SESSIONS&&i(eO,l).begin_session?(l.begin_session.apply(l,i(eO,l).begin_session),i(eO,l).begin_session=null):e===c.VIEWS&&i(eO,l).track_pageview&&(a(eh,l,null),l.track_pageview.apply(l,i(eO,l).track_pageview),i(eO,l).track_pageview=null)},1)):i(t9,l).call(l,u.ERROR,"add_consent, No feature available for ["+e+"]")}),o(this,"remove_consent",function(e){i(t9,l).call(l,u.INFO,"remove_consent, Removing consent for ["+e+"]"),l.remove_consent_internal(e,!0)}),o(this,"remove_consent_internal",function(e,t){if(t=t||!1,Array.isArray(e))for(var n=0;n<e.length;n++)l.remove_consent_internal(e[n],t);else i(ez,l)[e]?i(ez,l)[e].features?l.remove_consent_internal(i(ez,l)[e].features,t):(i(ez,l)[e].optin=!1,t&&!1!==i(ez,l)[e].optin&&i(tN,l).call(l)):i(t9,l).call(l,u.WARNING,"remove_consent, No feature available for ["+e+"]")}),o(this,"enable_offline_mode",function(){if(i(eI,l))return void i(t9,l).call(l,u.WARNING,"enable_offline_mode, Countly is already in offline mode.");i(t9,l).call(l,u.INFO,"enable_offline_mode, Enabling offline mode"),l.remove_consent_internal(w.features,!1),a(eI,l,!0),i(tU,l).call(l),l.device_id="[CLY]_temp_id",a(eC,l,g.TEMPORARY_ID)}),o(this,"disable_offline_mode",function(e){if(!i(eI,l))return void i(t9,l).call(l,u.WARNING,"disable_offline_mode, Countly was not in offline mode.");i(t9,l).call(l,u.INFO,"disable_offline_mode, Disabling offline mode"),a(eI,l,!1),e&&l.device_id!==e?(l.device_id=e,a(eC,l,g.DEVELOPER_SUPPLIED),i(ih,l).call(l,"cly_id",l.device_id),i(ih,l).call(l,"cly_id_type",g.DEVELOPER_SUPPLIED),i(t9,l).call(l,u.INFO,"disable_offline_mode, Changing id to: "+l.device_id)):(l.device_id=i(t1,l).call(l),"[CLY]_temp_id"===l.device_id&&(l.device_id=E()),l.device_id!==i(ip,l).call(l,"cly_id")&&(i(ih,l).call(l,"cly_id",l.device_id),i(ih,l).call(l,"cly_id_type",g.SDK_GENERATED)));var t=!1;if(i(eo,l).length>0)for(var n=0;n<i(eo,l).length;n++)"[CLY]_temp_id"===i(eo,l)[n].device_id&&(i(eo,l)[n].device_id=l.device_id,i(eo,l)[n].t=i(eC,l),t=!0);t&&i(ih,l).call(l,"cly_queue",i(eo,l),!0),i(eP,l)&&(i(ik,l).sendInstantHCRequest(),a(eP,l,!1)),i(tb,l).call(l),i(e8,l)&&(i(tB,l).call(l),a(tg,l,!0))}),o(this,"begin_session",function(e,t){if(!i(e3,l))return void i(t9,l).call(l,u.INFO,"begin_session, Session tracking is disabled by server config");if(i(t9,l).call(l,u.INFO,"begin_session, Starting the session. There was an ongoing session: ["+i(et,l)+"]"),e&&i(t9,l).call(l,u.INFO,"begin_session, Heartbeats are disabled"),t&&i(t9,l).call(l,u.INFO,"begin_session, Session starts irrespective of session cookie"),l.check_consent(c.SESSIONS)){if(!i(et,l)){if(l.enableOrientationTracking){var n;i(tO,l).call(l),G(window,"resize",function(){clearTimeout(n),n=setTimeout(function(){i(tO,l).call(l)},200)})}a(ep,l,N()),a(et,l,!0),a(eg,l,!e);var o=i(ip,l).call(l,"cly_session");if(i(t9,l).call(l,u.VERBOSE,"begin_session, Session state, forced: ["+t+"], useSessionCookie: ["+i(eb,l)+"], seconds to expire: ["+(o-i(ep,l))+"], expired: ["+(parseInt(o)<=N())+"] "),t||!i(eb,l)||!o||parseInt(o)<=N()){i(t9,l).call(l,u.INFO,"begin_session, Session started"),null===i(eA,l)&&a(eA,l,!0);var r={};r.begin_session=1,r.metrics=JSON.stringify(i(t4,l).call(l)),i(tX,l).call(l,r)}i(ih,l).call(l,"cly_session",N()+60*i(eE,l))}}else i(eO,l).begin_session=[e,t]}),o(this,"session_duration",function(e){if(!i(e3,l))return void i(t9,l).call(l,u.INFO,"session_duration, Session tracking is disabled by server config");if(i(t9,l).call(l,u.INFO,"session_duration, Reporting session duration: ["+e+"]"),l.check_consent(c.SESSIONS)){if(!i(et,l))return void i(t9,l).call(l,u.DEBUG,"session_duration, No session was started");i(t9,l).call(l,u.INFO,"session_duration, Session extended: ["+e+"]"),i(tX,l).call(l,{session_duration:e}),i(tY,l).call(l)}}),o(this,"end_session",function(e,t){if(!i(e3,l)&&!t)return void i(t9,l).call(l,u.INFO,"end_session, Session tracking is disabled by server config");i(t9,l).call(l,u.INFO,"end_session, Ending the current session. There was an on going session:["+i(et,l)+"]"),l.check_consent(c.SESSIONS)&&i(et,l)&&(e=e||N()-i(ep,l),i(tH,l).call(l),!i(eb,l)||t?(i(t9,l).call(l,u.INFO,"end_session, Session ended"),i(tX,l).call(l,{end_session:1,session_duration:e})):l.session_duration(e),a(et,l,!1))}),o(this,"set_id",function(e){if(i(t9,l).call(l,u.INFO,"set_id, Changing the device ID to:["+e+"]"),null==e||""===e)return void i(t9,l).call(l,u.WARNING,"set_id, The provided device is not a valid ID");i(eC,l)===g.DEVELOPER_SUPPLIED?l.change_id(e,!1):l.change_id(e,!0)}),o(this,"change_id",function(e,t){if(i(t9,l).call(l,u.INFO,"change_id, Changing the device ID to: ["+e+"] with merge:["+t+"]"),!e||"string"!=typeof e||0===e.length)return void i(t9,l).call(l,u.WARNING,"change_id, The provided device ID is not a valid ID");if(i(eI,l)){i(t9,l).call(l,u.WARNING,"change_id, Offline mode was on, initiating disabling sequence instead."),l.disable_offline_mode(e);return}if(l.device_id==e)return void i(t9,l).call(l,u.DEBUG,"change_id, Provided device ID is equal to the current device ID. Aborting.");t||(i(t0,l).call(l),i(tq,l).call(l),l.end_session(null,!0),a(es,l,{}),l.remove_consent_internal(w.features,!1));var n=l.device_id;l.device_id=e,l.device_id=l.device_id,a(eC,l,g.DEVELOPER_SUPPLIED),i(ih,l).call(l,"cly_id",l.device_id),i(ih,l).call(l,"cly_id_type",g.DEVELOPER_SUPPLIED),i(t9,l).call(l,u.INFO,"change_id, Changing ID from:["+n+"] to ["+e+"]"),t?i(tX,l).call(l,{old_device_id:n}):l.begin_session(!i(eg,l),!0),l.remote_config&&(a(el,l,{}),i(ih,l).call(l,"cly_remote_configs",i(el,l)),l.fetch_remote_config(l.remote_config))}),o(this,"add_event",function(e){i(t9,l).call(l,u.INFO,"add_event, Adding event: ",e);var t=!1;switch(e.key){case s.NPS:case s.SURVEY:t=l.check_consent(c.FEEDBACK);break;case s.STAR_RATING:t=l.check_consent(c.STAR_RATING);break;case s.VIEW:t=l.check_consent(c.VIEWS);break;case s.ORIENTATION:t=l.check_consent(c.USERS);break;case s.ACTION:t=l.check_consent(c.CLICKS)||l.check_consent(c.SCROLLS);break;default:t=!!i(e6,l)&&l.check_consent(c.EVENTS)}t&&i(tI,l).call(l,e)}),o(this,"attempt_to_send_stored_requests",function(){i(t9,l).call(l,u.INFO,"attemptToSendStoredRequests, Attempting to send stored requests"),i(t0,l).call(l),i(tq,l).call(l)}),o(this,"test_mode_rq",function(e){i(t9,l).call(l,u.INFO,"test_mode_rq, Setting test mode to: ["+e+"]"),l.test_mode=e}),n(this,tI,function(e,t){if(l.ignore_visitor||!i(e2,l))return void i(t9,l).call(l,u.WARNING,"Not adding the event. Tracking is disabled by the server config:["+!i(e2,l)+"] or ignore_visitor is:["+l.ignore_visitor+"]");if(!e.key)return void i(t9,l).call(l,u.ERROR,"Adding event failed. Event must have a key property");e.count||(e.count=1),d.includes(e.key)||(e.key=T(e.key,i(tt,l),"add_cly_event",i(t9,l))),e.segmentation=M(e.segmentation,i(tt,l),i(ti,l),i(tn,l),"add_cly_event",i(t9,l));var n=C(e,["key","count","sum","dur","segmentation"]);n.timestamp=O();var a=new Date;n.hour=a.getHours(),n.dow=a.getDay(),n.id=t||b(),n.key===s.VIEW?n.pvid=i(eU,l)||"":n.cvid=i(eG,l)||"",i(er,l).push(n),i(ih,l).call(l,"cly_event",i(er,l)),i(t9,l).call(l,u.INFO,"With event ID: ["+n.id+"], successfully adding the last event:",n)}),o(this,"start_event",function(e){return e&&"string"==typeof e?(i(t9,l).call(l,u.INFO,"start_event, Starting timed event with key: ["+e+"]"),e=T(e,i(tt,l),"start_event",i(t9,l)),i(es,l)[e])?void i(t9,l).call(l,u.WARNING,"start_event, Timed event with key: ["+e+"] already started"):void(i(es,l)[e]=N()):void i(t9,l).call(l,u.WARNING,"start_event, you have to provide a valid string key instead of: ["+e+"]")}),o(this,"cancel_event",function(e){return e&&"string"==typeof e?(i(t9,l).call(l,u.INFO,"cancel_event, Canceling timed event with key: ["+e+"]"),e=T(e,i(tt,l),"cancel_event",i(t9,l)),i(es,l)[e])?(delete i(es,l)[e],i(t9,l).call(l,u.INFO,"cancel_event, Timed event with key: ["+e+"] is canceled"),!0):(i(t9,l).call(l,u.WARNING,"cancel_event, Timed event with key: ["+e+"] was not found"),!1):(i(t9,l).call(l,u.WARNING,"cancel_event, you have to provide a valid string key instead of: ["+e+"]"),!1)}),o(this,"end_event",function(e){return e?(i(t9,l).call(l,u.INFO,"end_event, Ending timed event"),"string"==typeof e&&(e={key:e=T(e,i(tt,l),"end_event",i(t9,l))}),e.key)?i(es,l)[e.key]?void(e.dur=N()-i(es,l)[e.key],l.add_event(e),delete i(es,l)[e.key]):void i(t9,l).call(l,u.ERROR,"end_event, Timed event with key: ["+e.key+"] was not started"):void i(t9,l).call(l,u.ERROR,"end_event, Timed event must have a key property"):void i(t9,l).call(l,u.WARNING,"end_event, you have to provide a valid string key or event object instead of: ["+e+"]")}),n(this,tO,function(e){i(t9,l).call(l,u.INFO,"report_orientation, Reporting orientation"),l.check_consent(c.USERS)&&i(tI,l).call(l,{key:s.ORIENTATION,segmentation:{mode:e||(window.innerWidth>window.innerHeight?"landscape":"portrait")}})}),o(this,"report_conversion",function(e,t){i(t9,l).call(l,u.WARNING,"report_conversion, Deprecated function call! Use 'recordDirectAttribution' in place of this call. Call will be redirected now!"),l.recordDirectAttribution(e,t)}),o(this,"recordDirectAttribution",function(e,t){i(t9,l).call(l,u.INFO,"recordDirectAttribution, Recording the attribution for campaign ID: ["+e+"] and the user ID: ["+t+"]"),l.check_consent(c.ATTRIBUTION)&&(e=e||i(ip,l).call(l,"cly_cmp_id")||"cly_organic",(t=t||i(ip,l).call(l,"cly_cmp_uid"))?i(tX,l).call(l,{campaign_id:e,campaign_user:t}):i(tX,l).call(l,{campaign_id:e}))}),o(this,"user_details",function(e){i(t9,l).call(l,u.INFO,"user_details, Trying to add user details: ",e),l.check_consent(c.USERS)&&(i(t0,l).call(l),i(tq,l).call(l),i(t9,l).call(l,u.INFO,"user_details, flushed the event queue"),e.name=T(e.name,i(ti,l),"user_details",i(t9,l)),e.username=T(e.username,i(ti,l),"user_details",i(t9,l)),e.email=T(e.email,i(ti,l),"user_details",i(t9,l)),e.organization=T(e.organization,i(ti,l),"user_details",i(t9,l)),e.phone=T(e.phone,i(ti,l),"user_details",i(t9,l)),e.picture=T(e.picture,4096,"user_details",i(t9,l)),e.gender=T(e.gender,i(ti,l),"user_details",i(t9,l)),e.byear=T(e.byear,i(ti,l),"user_details",i(t9,l)),e.custom=M(e.custom,i(tt,l),i(ti,l),i(tn,l),"user_details",i(t9,l)),i(tX,l).call(l,{user_details:JSON.stringify(C(e,["name","username","email","organization","phone","picture","gender","byear","custom"]))}))}),n(this,tS,{}),n(this,tW,function(e,t,n){l.check_consent(c.USERS)&&(i(tS,l)[e]||(i(tS,l)[e]={}),"$push"===n||"$pull"===n||"$addToSet"===n?(i(tS,l)[e][n]||(i(tS,l)[e][n]=[]),i(tS,l)[e][n].push(t)):i(tS,l)[e][n]=t)}),o(this,"userData",{set:function(e,t){i(t9,l).call(l,u.INFO,"[userData] set, Setting user's custom property value: ["+t+"] under the key: ["+e+"]"),e=T(e,i(tt,l),"userData set",i(t9,l)),t=T(t,i(ti,l),"userData set",i(t9,l)),i(tS,l)[e]=t},unset:function(e){i(t9,l).call(l,u.INFO,"[userData] unset, Resetting user's custom property with key: ["+e+"] "),i(tS,l)[e]=""},set_once:function(e,t){i(t9,l).call(l,u.INFO,"[userData] set_once, Setting user's unique custom property value: ["+t+"] under the key: ["+e+"] "),e=T(e,i(tt,l),"userData set_once",i(t9,l)),t=T(t,i(ti,l),"userData set_once",i(t9,l)),i(tW,l).call(l,e,t,"$setOnce")},increment:function(e){i(t9,l).call(l,u.INFO,"[userData] increment, Increasing user's custom property value under the key: ["+e+"] by one"),e=T(e,i(tt,l),"userData increment",i(t9,l)),i(tW,l).call(l,e,1,"$inc")},increment_by:function(e,t){i(t9,l).call(l,u.INFO,"[userData] increment_by, Increasing user's custom property value under the key: ["+e+"] by: ["+t+"]"),e=T(e,i(tt,l),"userData increment_by",i(t9,l)),t=T(t,i(ti,l),"userData increment_by",i(t9,l)),i(tW,l).call(l,e,t,"$inc")},multiply:function(e,t){i(t9,l).call(l,u.INFO,"[userData] multiply, Multiplying user's custom property value under the key: ["+e+"] by: ["+t+"]"),e=T(e,i(tt,l),"userData multiply",i(t9,l)),t=T(t,i(ti,l),"userData multiply",i(t9,l)),i(tW,l).call(l,e,t,"$mul")},max:function(e,t){i(t9,l).call(l,u.INFO,"[userData] max, Saving user's maximum custom property value compared to the value: ["+t+"] under the key: ["+e+"]"),e=T(e,i(tt,l),"userData max",i(t9,l)),t=T(t,i(ti,l),"userData max",i(t9,l)),i(tW,l).call(l,e,t,"$max")},min:function(e,t){i(t9,l).call(l,u.INFO,"[userData] min, Saving user's minimum custom property value compared to the value: ["+t+"] under the key: ["+e+"]"),e=T(e,i(tt,l),"userData min",i(t9,l)),t=T(t,i(ti,l),"userData min",i(t9,l)),i(tW,l).call(l,e,t,"$min")},push:function(e,t){i(t9,l).call(l,u.INFO,"[userData] push, Pushing a value: ["+t+"] under the key: ["+e+"] to user's custom property array"),e=T(e,i(tt,l),"userData push",i(t9,l)),t=T(t,i(ti,l),"userData push",i(t9,l)),i(tW,l).call(l,e,t,"$push")},push_unique:function(e,t){i(t9,l).call(l,u.INFO,"[userData] push_unique, Pushing a unique value: ["+t+"] under the key: ["+e+"] to user's custom property array"),e=T(e,i(tt,l),"userData push_unique",i(t9,l)),t=T(t,i(ti,l),"userData push_unique",i(t9,l)),i(tW,l).call(l,e,t,"$addToSet")},pull:function(e,t){i(t9,l).call(l,u.INFO,"[userData] pull, Removing the value: ["+t+"] under the key: ["+e+"] from user's custom property array"),i(tW,l).call(l,e,t,"$pull")},save:function(){i(t9,l).call(l,u.INFO,"[userData] save, Saving changes to user's custom property"),l.check_consent(c.USERS)&&(i(t0,l).call(l),i(tq,l).call(l),i(t9,l).call(l,u.INFO,"user_details, flushed the event queue"),i(tX,l).call(l,{user_details:JSON.stringify({custom:i(tS,l)})})),a(tS,l,{})}}),o(this,"report_trace",function(e){if(i(t9,l).call(l,u.INFO,"report_trace, Reporting performance trace"),l.check_consent(c.APM)){for(var t=["type","name","stz","etz","apm_metrics","apm_attr"],n=0;n<t.length;n++)if("apm_attr"!==t[n]&&void 0===e[t[n]])return void i(t9,l).call(l,u.WARNING,"report_trace, APM trace don't have the property: "+t[n]);e.name=T(e.name,i(tt,l),"report_trace",i(t9,l)),e.app_metrics=M(e.app_metrics,i(tt,l),i(ti,l),i(tn,l),"report_trace",i(t9,l));var a=C(e,t);a.timestamp=e.stz;var o=new Date;a.hour=o.getHours(),a.dow=o.getDay(),i(tX,l).call(l,{apm:JSON.stringify(a)}),i(t9,l).call(l,u.INFO,"report_trace, Successfully adding APM trace: ",a)}}),o(this,"track_errors",function(e){return y?i(e5,l)?void(i(t9,l).call(l,u.INFO,"track_errors, Started tracking errors"),w.i[l.app_key].tracking_crashes=!0,!window.cly_crashes&&(window.cly_crashes=!0,a(eu,l,e),window.addEventListener("error",function(e){if(e.error)W(e.error,!1);else{var t=e.message||"Unknown error",i=e.filename||"",n=e.lineno||0,a=e.colno||0,o=t+"\n";i&&(o+="at "+i),n&&(o+=":"+n),a&&(o+=":"+a),o+="\n";try{o+=""}catch(e){}W(o,!1)}}),window.addEventListener("unhandledrejection",function(e){W(Error("Unhandled rejection (reason: "+(e.reason&&e.reason.stack?e.reason.stack:e.reason)+")."),!0)}))):void i(t9,l).call(l,u.WARNING,"track_errors, Crash tracking is disabled by the server config. Not tracking errors."):void i(t9,l).call(l,u.WARNING,"track_errors, window object is not available. Not tracking errors.")}),o(this,"log_error",function(e,t){i(t9,l).call(l,u.INFO,"log_error, Logging errors"),l.recordError(e,!0,t)}),o(this,"add_log",function(e){if(i(t9,l).call(l,u.INFO,"add_log, Adding a new log of breadcrumbs: [ "+e+" ]"),l.check_consent(c.CRASHES)){for(e=T(e,i(ti,l),"add_log",i(t9,l));i(ec,l).length>=i(ta,l);)i(ec,l).shift(),i(t9,l).call(l,u.WARNING,"add_log, Reached maximum crashLogs size. Will erase the oldest one.");i(ec,l).push(e)}}),o(this,"fetch_remote_config",function(e,t,n){var a=null,o=null,r=null;if(e&&(n||"function"!=typeof e?Array.isArray(e)&&(a=e):r=e),t&&(n||"function"!=typeof t?Array.isArray(t)&&(o=t):r=t),r||"function"!=typeof n||(r=n),l.useExplicitRcApi){i(t9,l).call(l,u.INFO,"fetch_remote_config, Fetching remote config");var c=+!!l.rcAutoOptinAb;i(tD,l).call(l,a,o,c,null,r);return}i(t9,l).call(l,u.WARNING,"fetch_remote_config, Fetching remote config, with legacy API"),i(tD,l).call(l,a,o,null,"legacy",r)}),n(this,tD,function(e,t,n,o,r){i(t9,l).call(l,u.INFO,"fetch_remote_config_explicit, Fetching sequence initiated");var s,d={method:"rc",av:l.app_version};e&&(d.keys=JSON.stringify(e)),t&&(d.omit_keys=JSON.stringify(t)),"legacy"===o&&(d.method="fetch_remote_config"),0===n&&(d.oi=0),1===n&&(d.oi=1),"function"==typeof r&&(s=r),l.check_consent(c.SESSIONS)&&(d.metrics=JSON.stringify(i(t4,l).call(l))),l.check_consent(c.REMOTE_CONFIG)?(i(tK,l).call(l,d),i(t8,l).call(l,"fetch_remote_config_explicit",l.url+i(en,l),d,function(e,t,n){if(!e){try{var o=JSON.parse(n);if(d.keys||d.omit_keys)for(var r in o)i(el,l)[r]=o[r];else a(el,l,o);i(ih,l).call(l,"cly_remote_configs",i(el,l))}catch(e){i(t9,l).call(l,u.ERROR,"fetch_remote_config_explicit, Had an issue while parsing the response: "+e)}s&&(i(t9,l).call(l,u.INFO,"fetch_remote_config_explicit, Callback function is provided"),s(e,i(el,l)))}},!0)):(i(t9,l).call(l,u.ERROR,"fetch_remote_config_explicit, Remote config requires explicit consent"),s&&s(Error("Remote config requires explicit consent"),i(el,l)))}),o(this,"enrollUserToAb",function(e){if(i(t9,l).call(l,u.INFO,"enrollUserToAb, Providing AB test keys to opt in for"),!e||!Array.isArray(e)||0===e.length)return void i(t9,l).call(l,u.ERROR,"enrollUserToAb, No keys provided");var t={method:"ab",keys:JSON.stringify(e),av:l.app_version};i(tK,l).call(l,t),i(t8,l).call(l,"enrollUserToAb",l.url+i(en,l),t,function(e,t,n){if(!e)try{var a=JSON.parse(n);i(t9,l).call(l,u.DEBUG,"enrollUserToAb, Parsed the response's result: ["+a.result+"]")}catch(e){i(t9,l).call(l,u.ERROR,"enrollUserToAb, Had an issue while parsing the response: "+e)}},!0)}),o(this,"get_remote_config",function(e){return(i(t9,l).call(l,u.INFO,"get_remote_config, Getting remote config from storage"),void 0!==e)?i(el,l)[e]:i(el,l)}),n(this,tA,function(){i(t9,l).call(l,u.INFO,"stop_time, Stopping tracking duration"),i(eS,l)&&(a(eS,l,!1),a(ef,l,N()-i(ep,l)),a(ev,l,N()-i(e_,l)))}),n(this,tC,function(){i(t9,l).call(l,u.INFO,"start_time, Starting tracking duration"),i(eS,l)||(a(eS,l,!0),a(ep,l,N()-i(ef,l)),a(e_,l,N()-i(ev,l)),a(ev,l,0),i(tY,l).call(l))}),o(this,"track_sessions",function(){if(!y)return void i(t9,l).call(l,u.WARNING,"track_sessions, window object is not available. Not tracking sessions.");i(t9,l).call(l,u.INFO,"track_session, Starting tracking user session"),l.begin_session(),i(tC,l).call(l),G(window,"beforeunload",function(){i(t0,l).call(l),i(tq,l).call(l),l.end_session()});var e="hidden",t=function(){document[e]||!document.hasFocus()?i(tA,l).call(l):i(tC,l).call(l)};G(window,"focus",t),G(window,"blur",t),G(window,"pageshow",t),G(window,"pagehide",t),"onfocusin"in document&&(G(window,"focusin",t),G(window,"focusout",t)),e in document?document.addEventListener("visibilitychange",t):"mozHidden"in document?(e="mozHidden",document.addEventListener("mozvisibilitychange",t)):"webkitHidden"in document?(e="webkitHidden",document.addEventListener("webkitvisibilitychange",t)):"msHidden"in document&&(e="msHidden",document.addEventListener("msvisibilitychange",t));var n=function(){i(ek,l)>=i(ew,l)&&i(tC,l).call(l),a(ek,l,0)};G(window,"mousemove",n),G(window,"click",n),G(window,"keydown",n),G(window,"scroll",n),setInterval(function(){var e;a(ek,l,(e=i(ek,l),++e)),i(ek,l)>=i(ew,l)&&i(tA,l).call(l)},6e4)}),o(this,"track_pageview",function(e,t,n){if(!y&&!e)return void i(t9,l).call(l,u.WARNING,"track_pageview, window object is not available. Not tracking page views as page name is not provided.");if(!i(e4,l))return void i(t9,l).call(l,u.WARNING,"track_pageview, View tracking is disabled by the server config. Not tracking page views.");if(i(t9,l).call(l,u.INFO,"track_pageview, Tracking page views"),i(t9,l).call(l,u.VERBOSE,"track_pageview, last view is:["+i(eh,l)+"], current view ID is:["+i(eG,l)+"], previous view ID is:["+i(eU,l)+"]"),i(eh,l)&&i(eB,l)&&(i(t9,l).call(l,u.DEBUG,"track_pageview, Scroll registry triggered"),i(io,l).call(l),a(eM,l,!0),a(eT,l,0)),i(tH,l).call(l),a(eU,l,i(eG,l)),a(eG,l,b()),(e=T(e,i(tt,l),"track_pageview",i(t9,l)))&&Array.isArray(e)&&(t=e,e=null),e||(e=l.getViewName()),void 0===e||""===e)return void i(t9,l).call(l,u.ERROR,"track_pageview, No page name to track (it is either undefined or empty string). No page view can be tracked.");if(null===e)return void i(t9,l).call(l,u.ERROR,"track_pageview, View name returned as null. Page view will be ignored.");if(t&&t.length)for(var o=0;o<t.length;o++)try{if(new RegExp(t[o]).test(e))return void i(t9,l).call(l,u.INFO,"track_pageview, Ignoring the page: "+e)}catch(e){i(t9,l).call(l,u.ERROR,"track_pageview, Problem with finding ignore list item: "+t[o]+", error: "+e)}var r={name:e,visit:1,view:l.getViewUrl()};if(r=M(r,i(tt,l),i(ti,l),i(tn,l),"track_pageview",i(t9,l)),l.track_domains&&(r.domain=window.location.hostname),i(eb,l))if(i(et,l))i(eA,l)&&(a(eA,l,!1),r.start=1);else{var d=i(ip,l).call(l,"cly_session");(!d||parseInt(d)<=N())&&(a(eA,l,!1),r.start=1)}else if(y&&void 0!==document.referrer&&document.referrer.length){var g=m.exec(document.referrer);g&&g[11]&&g[11]!==window.location.hostname&&(r.start=1)}if(i(ex,l)&&Object.keys(i(ex,l)).length)for(var p in i(t9,l).call(l,u.INFO,"track_pageview, Adding fresh utm tags to segmentation:["+JSON.stringify(i(ex,l))+"]"),i(ex,l))void 0===r["utm_"+p]&&(r["utm_"+p]=i(ex,l)[p]);if(y&&i(t6,l).call(l)&&(i(t9,l).call(l,u.INFO,"track_pageview, Adding referrer to segmentation:["+document.referrer+"]"),r.referrer=document.referrer),n)for(var f in n=M(n,i(tt,l),i(ti,l),i(tn,l),"track_pageview",i(t9,l)))void 0===r[f]&&(r[f]=n[f]);l.check_consent(c.VIEWS)?(i(tI,l).call(l,{key:s.VIEW,segmentation:r},i(eG,l)),a(eh,l,e),a(e_,l,N()),i(t9,l).call(l,u.VERBOSE,"track_pageview, last view is assigned:["+i(eh,l)+"]")):i(eO,l).track_pageview=[e,t,n]}),o(this,"track_view",function(e,t,n){i(t9,l).call(l,u.INFO,"track_view, Initiating tracking page views"),l.track_pageview(e,t,n)}),o(this,"track_clicks",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"track_clicks, window object is not available. Not tracking clicks.");i(t9,l).call(l,u.INFO,"track_clicks, Starting to track clicks"),e&&i(t9,l).call(l,u.INFO,"track_clicks, Tracking the specified children:["+e+"]");var t=!0;G(e=e||document,"click",function(e){if(t){if(t=!1,z(e),void 0!==e.pageX&&void 0!==e.pageY){var n=q(),a=V();if(l.check_consent(c.CLICKS)){var o={type:"click",x:e.pageX,y:e.pageY,width:a,height:n,view:l.getViewUrl()};o=M(o,i(tt,l),i(ti,l),i(tn,l),"processClick",i(t9,l)),l.track_domains&&(o.domain=window.location.hostname),i(tI,l).call(l,{key:s.ACTION,segmentation:o})}}setTimeout(function(){t=!0},1e3)}})}),o(this,"track_scrolls",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"track_scrolls, window object is not available. Not tracking scrolls.");i(t9,l).call(l,u.INFO,"track_scrolls, Starting to track scrolls"),e&&i(t9,l).call(l,u.INFO,"track_scrolls, Tracking the specified children"),e=e||window,a(eM,l,!0),a(eB,l,!0),G(e,"scroll",i(ia,l)),G(e,"beforeunload",i(io,l))}),o(this,"track_links",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"track_links, window object is not available. Not tracking links.");i(t9,l).call(l,u.INFO,"track_links, Starting to track clicks to links"),e&&i(t9,l).call(l,u.INFO,"track_links, Tracking the specified children"),G(e=e||document,"click",function(e){var t=function(e,t){for(t=t.toUpperCase();e;){if(e.nodeName.toUpperCase()===t)return e;e=e.parentElement}}(U(e),"a");t&&(z(e),l.check_consent(c.CLICKS)&&i(tI,l).call(l,{key:"linkClick",segmentation:{href:t.href,text:t.innerText,id:t.id,view:l.getViewUrl()}}))})}),o(this,"track_forms",function(e,t){if(!y)return void i(t9,l).call(l,u.WARNING,"track_forms, window object is not available. Not tracking forms.");i(t9,l).call(l,u.INFO,"track_forms, Starting to track form submissions. DOM object provided:["+!!e+"] Tracking hidden inputs :["+!!t+"]");var n=function(e){return e.name||e.id||e.type||e.nodeName};G(e=e||document,"submit",function(e){var a,o=U(e),r={id:o.attributes.id&&o.attributes.id.nodeValue,name:o.attributes.name&&o.attributes.name.nodeValue,action:o.attributes.action&&o.attributes.action.nodeValue,method:o.attributes.method&&o.attributes.method.nodeValue,view:l.getViewUrl()};if(void 0!==o.elements){for(var s=0;s<o.elements.length;s++)(a=o.elements[s])&&"password"!==a.type&&-1===a.className.indexOf("cly_user_ignore")&&(void 0===r["input:"+n(a)]&&(r["input:"+n(a)]=[]),"select"===a.nodeName.toLowerCase()?void 0!==a.multiple?r["input:"+n(a)].push(k(a)):r["input:"+n(a)].push(a.options[a.selectedIndex].value):"input"===a.nodeName.toLowerCase()?void 0!==a.type?"checkbox"===a.type.toLowerCase()||"radio"===a.type.toLowerCase()?a.checked&&r["input:"+n(a)].push(a.value):("hidden"!==a.type.toLowerCase()||t)&&r["input:"+n(a)].push(a.value):r["input:"+n(a)].push(a.value):"textarea"===a.nodeName.toLowerCase()?r["input:"+n(a)].push(a.value):void 0!==a.value&&r["input:"+n(a)].push(a.value));for(var d in r)r[d]&&"function"==typeof r[d].join&&(r[d]=r[d].join(", "))}l.check_consent(c.FORMS)&&i(tI,l).call(l,{key:"formSubmit",segmentation:r})})}),o(this,"collect_from_forms",function(e,t){if(!y)return void i(t9,l).call(l,u.WARNING,"collect_from_forms, window object is not available. Not collecting from forms.");i(t9,l).call(l,u.INFO,"collect_from_forms, Starting to collect possible user data. DOM object provided:["+!!e+"] Submitting custom user property:["+!!t+"]"),G(e=e||document,"submit",function(n){var a=U(n),o={},r=!1;if(void 0!==a.elements){var c,s,d,g={},p=e.getElementsByTagName("LABEL");for(s=0;s<p.length;s++)p[s].htmlFor&&""!==p[s].htmlFor&&(g[p[s].htmlFor]=p[s].innerText||p[s].textContent||p[s].innerHTML);for(s=0;s<a.elements.length;s++)if((c=a.elements[s])&&"password"!==c.type&&-1===c.className.indexOf("cly_user_ignore")){var f="";if("select"===c.nodeName.toLowerCase()?f=void 0!==c.multiple?k(c):c.options[c.selectedIndex].value:"input"===c.nodeName.toLowerCase()?void 0!==c.type&&("checkbox"===c.type.toLowerCase()||"radio"===c.type.toLowerCase())?c.checked&&(f=c.value):f=c.value:"textarea"===c.nodeName.toLowerCase()?f=c.value:void 0!==c.value&&(f=c.value),c.className&&-1!==c.className.indexOf("cly_user_")){var h=c.className.split(" ");for(d=0;d<h.length;d++)if(0===h[d].indexOf("cly_user_")){o[h[d].replace("cly_user_","")]=f,r=!0;break}}else c.type&&"email"===c.type.toLowerCase()||c.name&&-1!==c.name.toLowerCase().indexOf("email")||c.id&&-1!==c.id.toLowerCase().indexOf("email")||c.id&&g[c.id]&&-1!==g[c.id].toLowerCase().indexOf("email")||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(f)?(o.email||(o.email=f),r=!0):c.name&&-1!==c.name.toLowerCase().indexOf("username")||c.id&&-1!==c.id.toLowerCase().indexOf("username")||c.id&&g[c.id]&&-1!==g[c.id].toLowerCase().indexOf("username")?(o.username||(o.username=f),r=!0):c.name&&(-1!==c.name.toLowerCase().indexOf("tel")||-1!==c.name.toLowerCase().indexOf("phone")||-1!==c.name.toLowerCase().indexOf("number"))||c.id&&(-1!==c.id.toLowerCase().indexOf("tel")||-1!==c.id.toLowerCase().indexOf("phone")||-1!==c.id.toLowerCase().indexOf("number"))||c.id&&g[c.id]&&(-1!==g[c.id].toLowerCase().indexOf("tel")||-1!==g[c.id].toLowerCase().indexOf("phone")||-1!==g[c.id].toLowerCase().indexOf("number"))?(o.phone||(o.phone=f),r=!0):c.name&&(-1!==c.name.toLowerCase().indexOf("org")||-1!==c.name.toLowerCase().indexOf("company"))||c.id&&(-1!==c.id.toLowerCase().indexOf("org")||-1!==c.id.toLowerCase().indexOf("company"))||c.id&&g[c.id]&&(-1!==g[c.id].toLowerCase().indexOf("org")||-1!==g[c.id].toLowerCase().indexOf("company"))?(o.organization||(o.organization=f),r=!0):(c.name&&-1!==c.name.toLowerCase().indexOf("name")||c.id&&-1!==c.id.toLowerCase().indexOf("name")||c.id&&g[c.id]&&-1!==g[c.id].toLowerCase().indexOf("name"))&&(o.name||(o.name=""),o.name+=f+" ",r=!0)}}r&&(i(t9,l).call(l,u.INFO,"collect_from_forms, Gathered user data",o),t?l.user_details({custom:o}):l.user_details(o))})}),o(this,"collect_from_facebook",function(e){return y?"undefined"!=typeof FB&&FB&&FB.api?void(i(t9,l).call(l,u.INFO,"collect_from_facebook, Starting to collect possible user data"),FB.api("/me",function(t){var i={};if(t.name&&(i.name=t.name),t.email&&(i.email=t.email),"male"===t.gender?i.gender="M":"female"===t.gender&&(i.gender="F"),t.birthday){var n=t.birthday.split("/").pop();n&&4===n.length&&(i.byear=n)}if(t.work&&t.work[0]&&t.work[0].employer&&t.work[0].employer.name&&(i.organization=t.work[0].employer.name),e)for(var a in i.custom={},e){for(var o=e[a].split("."),r=t,c=0;c<o.length&&void 0!==(r=r[o[c]]);c++);void 0!==r&&(i.custom[a]=r)}l.user_details(i)})):void i(t9,l).call(l,u.ERROR,"collect_from_facebook, Facebook SDK is not available"):void i(t9,l).call(l,u.WARNING,"collect_from_facebook, window object is not available. Not collecting from Facebook.")}),o(this,"opt_out",function(){i(t9,l).call(l,u.WARNING,"opt_out, Opting out the user. Deprecated function call! Use 'consent' in place of this call."),l.ignore_visitor=!0,i(ih,l).call(l,"cly_ignore",!0)}),o(this,"opt_in",function(){i(t9,l).call(l,u.WARNING,"opt_in, Opting in the user. Deprecated function call! Use 'consent' in place of this call."),i(ih,l).call(l,"cly_ignore",!1),l.ignore_visitor=!1,i(tT,l).call(l),l.ignore_visitor||i(eN,l)||i(tQ,l).call(l)}),o(this,"report_feedback",function(e){i(t9,l).call(l,u.WARNING,"report_feedback, Deprecated function call! Use 'recordRatingWidgetWithID' or 'reportFeedbackWidgetManually' in place of this call. Call will be redirected to 'recordRatingWidgetWithID' now!"),l.recordRatingWidgetWithID(e)}),o(this,"recordRatingWidgetWithID",function(e){if(i(t9,l).call(l,u.INFO,"recordRatingWidgetWithID, Providing information about user with ID: [ "+e.widget_id+" ]"),l.check_consent(c.STAR_RATING)){if(!e.widget_id)return void i(t9,l).call(l,u.ERROR,"recordRatingWidgetWithID, Rating Widget must contain widget_id property");if(!e.rating)return void i(t9,l).call(l,u.ERROR,"recordRatingWidgetWithID, Rating Widget must contain rating property");var t={key:s.STAR_RATING,count:1,segmentation:{}};t.segmentation=C(e,["widget_id","contactMe","platform","app_version","rating","email","comment"]),t.segmentation.app_version||(t.segmentation.app_version=l.metrics._app_version||l.app_version),t.segmentation.rating>5?(i(t9,l).call(l,u.WARNING,"recordRatingWidgetWithID, You have entered a rating higher than 5. Changing it back to 5 now."),t.segmentation.rating=5):t.segmentation.rating<1&&(i(t9,l).call(l,u.WARNING,"recordRatingWidgetWithID, You have entered a rating lower than 1. Changing it back to 1 now."),t.segmentation.rating=1),i(t9,l).call(l,u.INFO,"recordRatingWidgetWithID, Reporting Rating Widget: ",t),i(tI,l).call(l,t)}}),o(this,"reportFeedbackWidgetManually",function(e,t,n){if(l.check_consent(c.FEEDBACK)){if(!(e&&t))return void i(t9,l).call(l,u.ERROR,"reportFeedbackWidgetManually, Widget data and/or Widget object not provided. Aborting.");if(!e._id)return void i(t9,l).call(l,u.ERROR,"reportFeedbackWidgetManually, Feedback Widgets must contain _id property");if(i(eI,l))return void i(t9,l).call(l,u.ERROR,"reportFeedbackWidgetManually, Feedback Widgets can not be reported in offline mode");i(t9,l).call(l,u.INFO,"reportFeedbackWidgetManually, Providing information about user with, provided result of the widget with  ID: [ "+e._id+" ] and type: ["+e.type+"]");var a,o=[],r=e.type;if("nps"===r){if(n){if(!n.rating)return void i(t9,l).call(l,u.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");n.rating=Math.round(n.rating),n.rating>10?(i(t9,l).call(l,u.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 10. Changing it back to 10 now."),n.rating=10):n.rating<0&&(i(t9,l).call(l,u.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 0. Changing it back to 0 now."),n.rating=0),o=["rating","comment"]}a=s.NPS}else if("survey"===r){if(n){if(Object.keys(n).length<1)return void i(t9,l).call(l,u.ERROR,"reportFeedbackWidgetManually, Widget should have answers to be reported");o=Object.keys(n)}a=s.SURVEY}else{if("rating"!==r)return void i(t9,l).call(l,u.ERROR,"reportFeedbackWidgetManually, Widget has an unacceptable type");if(n){if(!n.rating)return void i(t9,l).call(l,u.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");n.rating=Math.round(n.rating),n.rating>5?(i(t9,l).call(l,u.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 5. Changing it back to 5 now."),n.rating=5):n.rating<1&&(i(t9,l).call(l,u.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 1. Changing it back to 1 now."),n.rating=1),o=["rating","comment","email","contactMe"]}a=s.STAR_RATING}var d={key:a,count:1,segmentation:{widget_id:e._id,platform:l.platform,app_version:l.metrics._app_version||l.app_version}};null===n?d.segmentation.closed=1:d.segmentation=function(e,t,i){if(i){for(var n,a=0,o=i.length;a<o;a++)void 0!==t[n=i[a]]&&(e[n]=t[n]);return e}}(d.segmentation,n,o),i(t9,l).call(l,u.INFO,"reportFeedbackWidgetManually, Reporting "+r+": ",d),i(tI,l).call(l,d)}}),o(this,"show_feedback_popup",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"show_feedback_popup, window object is not available. Not showing feedback popup.");i(t9,l).call(l,u.WARNING,"show_feedback_popup, Deprecated function call! Use 'presentRatingWidgetWithID' in place of this call. Call will be redirected now!"),presentRatingWidgetWithID(e)}),o(this,"presentRatingWidgetWithID",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"presentRatingWidgetWithID, window object is not available. Not showing rating widget popup.");i(t9,l).call(l,u.INFO,"presentRatingWidgetWithID, Showing rating widget popup for the widget with ID: [ "+e+" ]"),l.check_consent(c.STAR_RATING)&&(i(eI,l)?i(t9,l).call(l,u.ERROR,"presentRatingWidgetWithID, Cannot show ratingWidget popup in offline mode"):i(t8,l).call(l,"presentRatingWidgetWithID,",l.url+"/o/feedback/widget",{widget_id:e,av:l.app_version},function(e,t,n){if(!e)try{var a=JSON.parse(n);i(tV,l).call(l,a,!1)}catch(e){i(t9,l).call(l,u.ERROR,"presentRatingWidgetWithID, JSON parse failed: "+e)}},!0))}),o(this,"initialize_feedback_popups",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"initialize_feedback_popups, window object is not available. Not initializing feedback popups.");i(t9,l).call(l,u.WARNING,"initialize_feedback_popups, Deprecated function call! Use 'initializeRatingWidgets' in place of this call. Call will be redirected now!"),l.initializeRatingWidgets(e)}),o(this,"initializeRatingWidgets",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"initializeRatingWidgets, window object is not available. Not initializing rating widgets.");if(i(t9,l).call(l,u.INFO,"initializeRatingWidgets, Initializing rating widget with provided widget IDs:[ "+e+"]"),l.check_consent(c.STAR_RATING)){e||(e=i(ip,l).call(l,"cly_fb_widgets"));for(var t=document.getElementsByClassName("countly-feedback-sticker");t.length>0;)t[0].remove();i(t8,l).call(l,"initializeRatingWidgets,",l.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(e),av:l.app_version},function(e,t,n){if(!e)try{for(var a=JSON.parse(n),o=0;o<a.length;o++)if("true"===a[o].is_active&&a[o].target_devices[L()])if("string"==typeof a[o].hide_sticker&&(a[o].hide_sticker="true"===a[o].hide_sticker),"all"!==a[o].target_page||a[o].hide_sticker)for(var r=a[o].target_pages,c=0;c<r.length;c++){var s=r[c].substr(0,r[c].length-1)===window.location.pathname.substr(0,r[c].length-1),d=r[c]===window.location.pathname;(r[c].includes("*")&&s||d)&&!a[o].hide_sticker&&i(tV,l).call(l,a[o],!0)}else i(tV,l).call(l,a[o],!0)}catch(e){i(t9,l).call(l,u.ERROR,"initializeRatingWidgets, JSON parse error: "+e)}},!0)}}),o(this,"enable_feedback",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"enable_feedback, window object is not available. Not enabling feedback.");i(t9,l).call(l,u.WARNING,"enable_feedback, Deprecated function call! Use 'enableRatingWidgets' in place of this call. Call will be redirected now!"),l.enableRatingWidgets(e)}),o(this,"enableRatingWidgets",function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"enableRatingWidgets, window object is not available. Not enabling rating widgets.");if(i(t9,l).call(l,u.INFO,"enableRatingWidgets, Enabling rating widget with params:",e),l.check_consent(c.STAR_RATING))if(i(eI,l))i(t9,l).call(l,u.ERROR,"enableRatingWidgets, Cannot enable rating widgets in offline mode");else{i(ih,l).call(l,"cly_fb_widgets",e.popups||e.widgets),Y(l.url+"/star-rating/stylesheets/countly-feedback-web.css");var t=e.popups||e.widgets;t.length>0?(document.body.insertAdjacentHTML("beforeend",'<div id="cfbg"></div>'),l.initializeRatingWidgets(t)):i(t9,l).call(l,u.ERROR,"enableRatingWidgets, You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")}}),n(this,tM,function(e,t){i(t9,l).call(l,u.INFO,"showWidget, Showing ".concat(e," widget, nameIDorTag:[").concat(t,"]")),l.get_available_feedback_widgets(function(n,a){if(a)return void i(t9,l).call(l,u.ERROR,"showWidget, Error while getting feedback widgets list: ".concat(a));var o=n.find(function(t){return t.type===e});if(t&&"string"==typeof t){var r=n.find(function(i){return i.type===e&&(i.name===t||i._id===t||i.tg.includes(t))});r&&(o=r,i(t9,l).call(l,u.VERBOSE,"showWidget, Found ".concat(e," widget by name, id, or tag: [").concat(JSON.stringify(r),"]")))}if(!o)return void i(t9,l).call(l,u.ERROR,"showWidget, No ".concat(e," widget found."));l.present_feedback_widget(o,null,null,null)})}),o(this,"feedback",{showNPS:function(e){return i(tM,l).call(l,"nps",e)},showSurvey:function(e){return i(tM,l).call(l,"survey",e)},showRating:function(e){return i(tM,l).call(l,"rating",e)}}),o(this,"get_available_feedback_widgets",function(e){if(i(t9,l).call(l,u.INFO,"get_available_feedback_widgets, Getting the feedback list, callback function is provided:["+!!e+"]"),!l.check_consent(c.FEEDBACK)){e&&e(null,Error("Consent for feedback not provided."));return}if(i(eI,l))return void i(t9,l).call(l,u.ERROR,"get_available_feedback_widgets, Cannot enable feedback widgets in offline mode.");var t=l.url+i(en,l),n={method:c.FEEDBACK,device_id:l.device_id,app_key:l.app_key,av:l.app_version};i(t8,l).call(l,"get_available_feedback_widgets,",t,n,function(t,n,a){if(t){e&&e(null,t);return}try{var o=JSON.parse(a).result||[];e&&e(o,null)}catch(t){i(t9,l).call(l,u.ERROR,"get_available_feedback_widgets, Error while parsing feedback widgets list: "+t),e&&e(null,t)}},!1)}),o(this,"getFeedbackWidgetData",function(e,t){if(!e.type)return void i(t9,l).call(l,u.ERROR,"getFeedbackWidgetData, Expected the provided widget object to have a type but got: ["+JSON.stringify(e)+"], aborting.");if(i(t9,l).call(l,u.INFO,"getFeedbackWidgetData, Retrieving data for: ["+JSON.stringify(e)+"], callback function is provided:["+!!t+"]"),!l.check_consent(c.FEEDBACK)){t&&t(null,Error("Consent for feedback not provided."));return}if(i(eI,l))return void i(t9,l).call(l,u.ERROR,"getFeedbackWidgetData, Cannot enable feedback widgets in offline mode.");var n=l.url,a={widget_id:e._id,shown:1,sdk_version:i(eL,l),sdk_name:i(eF,l),platform:l.platform,app_version:l.app_version};if("nps"===e.type)n+="/o/surveys/nps/widget";else if("survey"===e.type)n+="/o/surveys/survey/widget";else{if("rating"!==e.type)return void i(t9,l).call(l,u.ERROR,"getFeedbackWidgetData, Unknown type info: ["+e.type+"]");n+="/o/surveys/rating/widget"}i(t8,l).call(l,"getFeedbackWidgetData,",n,a,o,!0);var o=function(e,n,a){if(e){t&&t(null,e);return}try{var o=JSON.parse(a);t&&t(o,null)}catch(e){i(t9,l).call(l,u.ERROR,"getFeedbackWidgetData, Error while parsing feedback widgets list: "+e),t&&t(null,e)}}}),o(this,"present_feedback_widget",function(e,t,n,a){if(!y)return void i(t9,l).call(l,u.WARNING,"present_feedback_widget, window object is not available. Not presenting feedback widget.");if(i(t9,l).call(l,u.INFO,"present_feedback_widget, Presenting the feedback widget by appending to the element with ID: [ "+t+" ] and className: [ "+n+" ]"),l.check_consent(c.FEEDBACK)){if(!e||"object"!==r(e)||Array.isArray(e))return void i(t9,l).call(l,u.ERROR,"present_feedback_widget, Please provide at least one feedback widget object.");i(t9,l).call(l,u.INFO,"present_feedback_widget, Adding segmentation to feedback widgets:["+JSON.stringify(a)+"]"),a&&"object"===r(a)&&0!==Object.keys(a).length||(i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Segmentation is not an object or empty"),a=null);try{var o,s=l.url;if("nps"===e.type)i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Widget type: nps."),s+="/feedback/nps";else if("survey"===e.type)i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Widget type: survey."),s+="/feedback/survey";else{if("rating"!==e.type)return void i(t9,l).call(l,u.ERROR,"present_feedback_widget, Feedback widget only accepts nps, rating and survey types.");i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Widget type: rating."),s+="/feedback/rating"}var d=window.origin||window.location.origin;"rating"===e.type?(i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Loading css for rating widget."),o="ratings",Y(l.url+"/star-rating/stylesheets/countly-feedback-web.css")):(i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Loading css for survey or nps."),Y(l.url+"/surveys/stylesheets/countly-surveys.css"),o="surveys"),s+="?widget_id="+e._id,s+="&app_key="+l.app_key,s+="&device_id="+l.device_id,s+="&sdk_name="+i(eF,l),s+="&platform="+l.platform,s+="&app_version="+l.app_version,s+="&sdk_version="+i(eL,l);var g={};g.tc=1,a&&(g.sg=a),s+="&custom="+JSON.stringify(g),s+="&origin="+d,s+="&widget_v=web";var p=document.createElement("iframe");p.src=s,p.name="countly-"+o+"-iframe",p.id="countly-"+o+"-iframe";var f=!1;p.onload=function(){f&&(document.getElementById("countly-"+o+"-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none"),f=!0,i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Loaded iframe.")};for(var h=document.getElementById("csbg");h;)h.remove(),h=document.getElementById("csbg"),i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Removing past overlay.");for(var _=document.getElementsByClassName("countly-"+o+"-wrapper"),v=0;v<_.length;v++)_[v].remove(),i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Removed a wrapper.");_=document.createElement("div");var m="countly-"+o+"-wrapper";_.className=m+" "+m+"--"+e.type,_.id="countly-"+o+"-wrapper-"+e._id,"survey"===e.type&&(_.className=_.className+" "+e.appearance.position);var w=document.body,k=!1;if(t&&(document.getElementById(t)?(w=document.getElementById(t),k=!0):i(t9,l).call(l,u.ERROR,"present_feedback_widget, Provided ID not found.")),!k&&n&&(document.getElementsByClassName(n)[0]?w=document.getElementsByClassName(n)[0]:i(t9,l).call(l,u.ERROR,"present_feedback_widget, Provided class not found.")),w.insertAdjacentHTML("beforeend",'<div id="csbg"></div>'),w.appendChild(_),"rating"===e.type){var b=document.createElement("div");b.className="countly-ratings-overlay",b.id="countly-ratings-overlay-"+e._id,_.appendChild(b),i(t9,l).call(l,u.DEBUG,"present_feedback_widget, appended the rating overlay to wrapper"),G(document.getElementById("countly-ratings-overlay-"+e._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="none"})}_.appendChild(p),i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Appended the iframe"),G(window,"message",function(t){var n={};try{n=JSON.parse(t.data)}catch(e){i(t9,l).call(l,u.ERROR,"present_feedback_widget, Error while parsing message body "+e)}!0===n.close&&(i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Received message from widget with origin: ["+t.origin+"] and data: ["+t.data+"]"),document.getElementById("countly-"+o+"-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none",i(t9,l).call(l,u.DEBUG,"present_feedback_widget, Closed the widget"))});var E=function(e){document.getElementById("countly-surveys-wrapper-"+e._id).style.display="block",document.getElementById("csbg").style.display="block"},R=function(e){for(var t=document.getElementsByClassName("countly-feedback-sticker");t.length>0;)i(t9,l).call(l,u.VERBOSE,"present_feedback_widget, Removing old stickers"),t[0].remove();if(!e.appearance.hideS){i(t9,l).call(l,u.DEBUG,"present_feedback_widget, handling the sticker as it was not set to hidden");var n=document.createElement("div");n.innerText=e.appearance.text,n.style.color=e.appearance.text_color.length<7?"#"+e.appearance.text_color:e.appearance.text_color,n.style.backgroundColor=e.appearance.bg_color.length<7?"#"+e.appearance.bg_color:e.appearance.bg_color,n.className="countly-feedback-sticker  "+e.appearance.position+"-"+e.appearance.size,n.id="countly-feedback-sticker-"+e._id,document.body.appendChild(n),G(document.getElementById("countly-feedback-sticker-"+e._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="flex",document.getElementById("csbg").style.display="block"})}G(document.getElementById("countly-feedback-close-icon-"+e._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none"})};if("survey"===e.type){var N=!1;switch(e.showPolicy){case"afterPageLoad":"complete"===document.readyState?N||(N=!0,E(e)):G(document,"readystatechange",function(t){"complete"!==t.target.readyState||N||(N=!0,E(e))});break;case"afterConstantDelay":setTimeout(function(){N||(N=!0,E(e))},1e4);break;case"onAbandon":"complete"===document.readyState?G(document,"mouseleave",function(){N||(N=!0,E(e))}):G(document,"readystatechange",function(t){"complete"===t.target.readyState&&G(document,"mouseleave",function(){N||(N=!0,E(e))})});break;case"onScrollHalfwayDown":G(window,"scroll",function(){if(!N){var t=Math.max(window.scrollY,document.body.scrollTop,document.documentElement.scrollTop),i=q();t>=i/2&&(N=!0,E(e))}});break;default:N||(N=!0,E(e))}}else if("nps"===e.type)document.getElementById("countly-"+o+"-wrapper-"+e._id).style.display="block",document.getElementById("csbg").style.display="block";else if("rating"===e.type){var I=!1;"complete"===document.readyState?I||(I=!0,R(e)):G(document,"readystatechange",function(t){"complete"!==t.target.readyState||I||(I=!0,R(e))})}}catch(e){i(t9,l).call(l,u.ERROR,"present_feedback_widget, Something went wrong while presenting the widget: "+e)}}}),o(this,"recordError",function(e,t,n){if(!i(e5,l))return void i(t9,l).call(l,u.WARNING,"recordError, Crash tracking is disabled by the server config. Not tracking errors.");if(i(t9,l).call(l,u.INFO,"recordError, Recording error"),l.check_consent(c.CRASHES)&&e){n=n||i(eu,l);var o="";if("object"===r(e)?void 0!==e.stack?o=e.stack:(void 0!==e.name&&(o+=e.name+":"),void 0!==e.message&&(o+=e.message+"\n"),void 0!==e.fileName&&(o+="in "+e.fileName+"\n"),void 0!==e.lineNumber&&(o+="on "+e.lineNumber),void 0!==e.columnNumber&&(o+=":"+e.columnNumber)):o=e+"",o.length>i(tr,l)*i(to,l)){i(t9,l).call(l,u.DEBUG,"record_error, Error stack is too long will be truncated");var s=o.split("\n");s.length>i(to,l)&&(s=s.splice(0,i(to,l)));for(var d=0,g=s.length;d<g;d++)s[d].length>i(tr,l)&&(s[d]=s[d].substring(0,i(tr,l)));o=s.join("\n")}t=!!t;var p=i(t4,l).call(l),f={_resolution:p._resolution,_error:o,_app_version:p._app_version,_run:N()-i(eW,l)};f._not_os_specific=!0,f._javascript=!0;var h=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery;h&&(f._bat=Math.floor(100*h.level)),void 0!==navigator.onLine&&(f._online=!!navigator.onLine),y&&(f._background=!document.hasFocus()),i(ec,l).length>0&&(f._logs=i(ec,l).join("\n")),a(ec,l,[]),f._nonfatal=t,f._view=l.getViewName(),void 0!==n&&(n=M(n,i(tt,l),i(ti,l),i(tn,l),"record_error",i(t9,l)),f._custom=n);try{var _=document.createElement("canvas").getContext("experimental-webgl");f._opengl=_.getParameter(_.VERSION)}catch(e){i(t9,l).call(l,u.ERROR,"Could not get the experimental-webgl context: "+e)}var v={};if(v.metrics=JSON.stringify({_ua:p._ua}),i(eY,l)&&"function"==typeof i(eY,l)&&(i(t9,l).call(l,u.VERBOSE,"recordError, Applying crash filter to:["+JSON.stringify(f)+"]"),f=i(eY,l).call(l,f),i(t9,l).call(l,u.VERBOSE,"recordError, Filtered crash object:["+JSON.stringify(f)+"]")),!f)return void i(t9,l).call(l,u.DEBUG,"recordError, Crash object was filtered out");v.crash=JSON.stringify(f),i(tX,l).call(l,v)}}),n(this,tT,function(){i(t9,l).call(l,u.INFO,"checkIgnore, Checking if user or visit should be ignored"),l.ignore_prefetch&&y&&void 0!==document.visibilityState&&"prerender"===document.visibilityState&&(l.ignore_visitor=!0,i(t9,l).call(l,u.DEBUG,"checkIgnore, Ignoring visit due to prerendering")),l.ignore_bots&&P()&&(l.ignore_visitor=!0,i(t9,l).call(l,u.DEBUG,"checkIgnore, Ignoring visit due to bot"))}),o(this,"content",{enterContentZone:function(){i(tB,l).call(l)},refreshContentZone:function(){i(tG,l).call(l)},exitContentZone:function(){i(tU,l).call(l)}}),n(this,tB,function(e){if(!y)return void i(t9,l).call(l,u.WARNING,"content.enterContentZone, window object is not available. Not entering content zone.");if(i(ej,l)&&!e)return void i(t9,l).call(l,u.DEBUG,"content.enterContentZone, Already in content zone");if(!i(tp,l)||O()-i(tp,l)<4e3){i(t9,l).call(l,u.DEBUG,"content.enterContentZone, Not enough time passed since initialization"),setTimeout(function(){i(tB,l).call(l)},4001);return}i(t9,l).call(l,u.INFO,"content.enterContentZone, Entering content zone"),a(ej,l,!0),e||i(tF,l).call(l),a(eH,l,setInterval(function(){i(tF,l).call(l)},i(e0,l)))}),n(this,tG,function(){if(!i(te,l))return void i(t9,l).call(l,u.DEBUG,"content.refreshContentZone, Refresh content zone is disabled");i(t9,l).call(l,u.INFO,"content.refreshContentZone, Refreshing content zone"),i(tU,l).call(l),i(t0,l).call(l),i(tq,l).call(l),setTimeout(function(){i(tB,l).call(l)},1e3)}),n(this,tU,function(){if(!i(ej,l))return void i(t9,l).call(l,u.DEBUG,"content.exitContentZone, Not in content zone");i(t9,l).call(l,u.INFO,"content.exitContentZone, Exiting content zone"),a(ej,l,!1),i(eH,l)&&(clearInterval(i(eH,l)),i(t9,l).call(l,u.DEBUG,"content.exitContentZone, content zone exited"))}),n(this,tx,function(){i(t9,l).call(l,u.DEBUG,"prepareContentRequest, forming content request");var e=i(t5,l).call(l,!0),t={l:{},p:{}},n=Math.max(e.width,e.height),a=Math.min(e.width,e.height);t.l.w=n,t.l.h=a,t.p.w=a,t.p.h=n;var o={method:"queue",la:(navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage).split("-")[0],resolution:JSON.stringify(t),cly_ws:1,cly_origin:window.location.origin,dt:L()};return i(tK,l).call(l,o),o}),n(this,tF,function(){i(t9,l).call(l,u.DEBUG,"sendContentRequest, sending content request");var e=i(tx,l).call(l);i(t8,l).call(l,"sendContentRequest,",l.url+i(eV,l),e,function(e,t,n){if(!e){if(!n)return void i(t9,l).call(l,u.VERBOSE,"sendContentRequest, no content to display");try{var a,o=JSON.parse(n)}catch(e){i(t9,l).call(l,u.VERBOSE,"sendContentRequest, No content to display or an error while parsing content: "+e);return}if(!o.html||!o.geo)return void i(t9,l).call(l,u.VERBOSE,"sendContentRequest, no html content or orientation to display");i(tL,l).call(l,o),clearInterval(i(eH,l)),window.addEventListener("message",function(e){i(tP,l).call(l,e)}),window.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(function(){var e=window.innerWidth,t=window.innerHeight,n=document.getElementById(i(eJ,l));n&&n.contentWindow.postMessage({type:"resize",width:e,height:t},"*")},200)})}},!0)}),n(this,tL,function(e){try{var t=document.createElement("iframe");t.id=i(eJ,l),t.src=e.html,t.style.position="absolute";var n=e.geo.p,a=i(t5,l).call(l,!0);a.width>=a.height&&(n=e.geo.l),t.style.left=n.x+"px",t.style.top=n.y+"px",t.style.width=n.w+"px",t.style.height=n.h+"px",t.style.border="none",t.style.zIndex="999999",document.body.appendChild(t)}catch(e){i(t9,l).call(l,u.ERROR,"displayContent, Error while creating iframe for the content: "+e)}}),n(this,tP,function(e){if(-1!==l.contentWhitelist.indexOf(e.origin)){i(t9,l).call(l,u.DEBUG,"interpretContentMessage, Received message from: ["+e.origin+"] with data: ["+JSON.stringify(e.data)+"]");var t=e.data,n=t.close,a=t.link,o=t.event,c=t.resize_me;if(o){if(i(t9,l).call(l,u.DEBUG,"interpretContentMessage, Received event"),1===n&&(i(t9,l).call(l,u.DEBUG,"interpretContentMessage, Closing content frame for event"),i(tz,l).call(l)),!Array.isArray(o))if("object"!==r(o))return void i(t9,l).call(l,u.ERROR,"interpretContentMessage, Invalid event type: ["+r(o)+"]");else throw TypeError('"event" is read-only');for(var s=0;s<o.length;s++)i(tI,l).call(l,o[s])}if(a&&(1===n&&(i(t9,l).call(l,u.DEBUG,"interpretContentMessage, Closing content frame for link"),i(tz,l).call(l)),window.open(a,"_blank"),i(t9,l).call(l,u.DEBUG,"interpretContentMessage, Opened link in new tab: [".concat(a,"]"))),c){i(t9,l).call(l,u.DEBUG,"interpretContentMessage, Resizing iframe");var d=i(t5,l).call(l,!0);if(!c.l||!c.p)return void i(t9,l).call(l,u.ERROR,"interpretContentMessage, Invalid resize object");var g=c.p;d.width>=d.height&&(g=c.l);var p=document.getElementById(i(eJ,l));p.style.left=g.x+"px",p.style.top=g.y+"px",p.style.width=g.w+"px",p.style.height=g.h+"px"}1===n&&i(tz,l).call(l)}}),n(this,tz,function(){var e=document.getElementById(i(eJ,l));e&&(e.remove(),i(t9,l).call(l,u.DEBUG,"interpretContentMessage, removed iframe"),i(ej,l)&&i(tB,l).call(l,!0))}),n(this,tq,function(){i(er,l).length>0&&(i(t9,l).call(l,u.DEBUG,"Flushing events"),i(tX,l).call(l,{events:JSON.stringify(i(er,l))}),a(er,l,[]),i(ih,l).call(l,"cly_event",i(er,l)))}),n(this,tV,function(e,t){if(!y)return void i(t9,l).call(l,u.WARNING,"processWidget, window object is not available. Not processing widget.");if(document.getElementById("countly-feedback-sticker-"+e._id))return void i(t9,l).call(l,u.ERROR,"Widget with same ID exists");try{var n=document.createElement("div");n.className="countly-iframe-wrapper",n.id="countly-iframe-wrapper-"+e._id;var a=document.createElement("span");a.className="countly-feedback-close-icon",a.id="countly-feedback-close-icon-"+e._id,a.innerText="x";var o=document.createElement("iframe");if(o.name="countly-feedback-iframe",o.id="countly-feedback-iframe",o.src=l.url+"/feedback?widget_id="+e._id+"&app_key="+l.app_key+"&device_id="+l.device_id+"&sdk_version="+i(eL,l),document.body.appendChild(n),n.appendChild(a),n.appendChild(o),G(document.getElementById("countly-feedback-close-icon-"+e._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+e._id).style.display="none",document.getElementById("cfbg").style.display="none"}),t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.id="feedback-sticker-svg",r.setAttribute("aria-hidden","true"),r.setAttribute("data-prefix","far"),r.setAttribute("data-icon","grin"),r.setAttribute("class","svg-inline--fa fa-grin fa-w-16"),r.setAttribute("role","img"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("viewBox","0 0 496 512");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.id="smileyPathInStickerSvg",c.setAttribute("fill","white"),c.setAttribute("d","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z");var s=document.createElement("span");s.innerText=e.trigger_button_text;var d=document.createElement("div");d.style.color=e.trigger_font_color.length<7?"#"+e.trigger_font_color:e.trigger_font_color,d.style.backgroundColor=e.trigger_bg_color.length<7?"#"+e.trigger_bg_color:e.trigger_bg_color,d.className="countly-feedback-sticker  "+e.trigger_position+"-"+e.trigger_size,d.id="countly-feedback-sticker-"+e._id,r.appendChild(c),d.appendChild(r),d.appendChild(s),document.body.appendChild(d);var g=document.getElementById("smileyPathInStickerSvg");g&&(g.style.fill=e.trigger_font_color.length<7?"#"+e.trigger_font_color:e.trigger_font_color),G(document.getElementById("countly-feedback-sticker-"+e._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+e._id).style.display="block",document.getElementById("cfbg").style.display="block"})}else document.getElementById("countly-iframe-wrapper-"+e._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(e){i(t9,l).call(l,u.ERROR,"Somethings went wrong while element injecting process: "+e)}}),n(this,tj,function(){var e;if(void 0!==l.onload&&l.onload.length>0){for(e=0;e<l.onload.length;e++)"function"==typeof l.onload[e]&&l.onload[e](l);l.onload=[]}}),n(this,tH,function(){if(!i(eh,l))return void i(t9,l).call(l,u.INFO,"reportViewDuration, No last view, will not report view duration");if(!i(e4,l))return void i(t9,l).call(l,u.INFO,"reportViewDuration, View tracking is disabled by the server config. Not tracking view duration");i(t9,l).call(l,u.INFO,"reportViewDuration, Reporting view duration for: ["+i(eh,l)+"]");var e={name:i(eh,l)};l.check_consent(c.VIEWS)&&(i(tI,l).call(l,{key:s.VIEW,dur:i(eS,l)?N()-i(e_,l):i(ev,l),segmentation:e},i(eG,l)),a(eh,l,null))}),n(this,tJ,function(){return i(t9,l).call(l,u.INFO,"getLastView, Getting last view: ["+i(eh,l)+"]"),i(eh,l)}),n(this,tY,function(){if(!i(eb,l))return void i(t9,l).call(l,u.DEBUG,"Will not extend the session as session cookie is disabled");i(t9,l).call(l,u.DEBUG,"Extending session");var e=i(ip,l).call(l,"cly_session");(!e||parseInt(e)<=N())&&(a(et,l,!1),l.begin_session(!i(eg,l))),i(ih,l).call(l,"cly_session",N()+60*i(eE,l))}),n(this,tK,function(e){e.app_key=l.app_key,e.device_id=l.device_id,e.sdk_name=i(eF,l),e.sdk_version=i(eL,l),e.t=i(eC,l),e.av=l.app_version;var t=i(t3,l).call(l);if(e.metrics){var n=JSON.parse(e.metrics);n._ua||(n._ua=t,e.metrics=JSON.stringify(n))}else e.metrics=JSON.stringify({_ua:t});l.check_consent(c.LOCATION)&&i(e9,l)?(l.country_code&&(e.country_code=l.country_code),l.city&&(e.city=l.city),null!==l.ip_address&&(e.ip_address=l.ip_address)):e.location="",e.timestamp=O(),i(tw,l)&&(i(t9,l).call(l,u.DEBUG,"prepareRequest, testing timestamp is set to: "+i(tw,l)),e.timestamp=i(tw,l));var a=new Date;e.hour=a.getHours(),e.dow=a.getDay(),e.tz=-a.getTimezoneOffset()}),n(this,tX,function(e){return l.ignore_visitor?void i(t9,l).call(l,u.DEBUG,"User is opt_out will ignore the request: "+e):i(e2,l)?l.app_key&&l.device_id?void(i(tK,l).call(l,e),i(eo,l).length>i(eQ,l)&&i(eo,l).shift(),i(eo,l).push(e),i(ih,l).call(l,"cly_queue",i(eo,l),!0)):void i(t9,l).call(l,u.ERROR,"app_key or device_id is missing ",l.app_key,l.device_id):void i(t9,l).call(l,u.DEBUG,"Tracking is disabled by server config, will not track the request: "+JSON.stringify(e))}),n(this,tQ,function(){if(i(tj,l).call(l),l.ignore_visitor){a(eN,l,!1),i(t9,l).call(l,u.WARNING,"User opt_out:["+l.ignore_visitor+"], no heartbeat");return}if(a(eN,l,!0),i(ee,l)&&void 0!==w.q&&w.q.length>0&&i(t0,l).call(l),i(et,l)&&i(eg,l)&&i(eS,l)){var e=N();e-i(ep,l)>i(e$,l)&&(l.session_duration(e-i(ep,l)),a(ep,l,e),l.hcErrorCount>0&&i(ih,l).call(l,h.errorCount,l.hcErrorCount),l.hcWarningCount>0&&i(ih,l).call(l,h.warningCount,l.hcWarningCount))}if(i(er,l).length>0&&!l.test_mode_eq){if(i(er,l).length<=i(eZ,l))i(tX,l).call(l,{events:JSON.stringify(i(er,l))}),a(er,l,[]);else{var t=i(er,l).splice(0,i(eZ,l));i(tX,l).call(l,{events:JSON.stringify(t)})}i(ih,l).call(l,"cly_event",i(er,l))}var n=N(),o=!1;if(i(tv,l)&&n<i(t_,l)?(o=!0,i(tm,l)||(i(t9,l).call(l,u.VERBOSE,"Request back-off active, suspending requests until: "+i(t_,l)+", current time: "+n),a(tm,l,!0))):i(tv,l)&&n>=i(t_,l)&&(i(t9,l).call(l,u.INFO,"Request back-off period ended, resuming normal request processing"),a(tv,l,!1),a(t_,l,0),o=!1,a(tm,l,!1)),!o&&!i(eI,l)&&i(eo,l).length>0&&i(eR,l)&&N()>i(em,l)){a(eR,l,!1);var r=i(eo,l)[0];r.rr=i(eo,l).length,i(t9,l).call(l,u.DEBUG,"Processing request",r),i(ih,l).call(l,"cly_queue",i(eo,l),!0),l.test_mode||i(t8,l).call(l,"send_request_queue",l.url+i(ei,l),r,function(e,t){e?a(em,l,N()+i(ey,l)):(i(eo,l).shift(),i(tZ,l).call(l,t)),i(ih,l).call(l,"cly_queue",i(eo,l),!0),a(eR,l,!0)},!1)}setTimeout(function(){i(tQ,l).call(l)},i(ea,l))}),n(this,tZ,function(e){if(!(!i(tl,l)||i(tv,l))){var t=i(th,l)>i(tc,l);if(t){var n=i(eo,l).length<i(eQ,l)*i(ts,l),o=N(),r=e&&e.timestamp?e.timestamp:o,c=o-r,s=c<60*i(td,l)*60;t&&n&&s?(i(t9,l).call(l,u.INFO,"Activating request back-off: response time ["+i(th,l)+"s], queue size ["+i(eo,l).length+"/"+i(eQ,l)+"], request age ["+c+"s]"),a(tv,l,!0),a(t_,l,o+i(tu,l)),i(ik,l).incrementBackoffCount(),i(t9,l).call(l,u.INFO,"Request back-off activated until: "+i(t_,l))):(i(t9,l).call(l,u.DEBUG,"No back-off conditions met: response time ["+i(th,l)+"s], queue size ["+i(eo,l).length+"/"+i(eQ,l)+"], request age ["+c+"s]"),i(ik,l).resetLastRequestBackoffStatus())}}}),n(this,t$,function(){return i(eq,l)}),n(this,t0,function(){if(void 0===w||void 0===w.i)return void i(t9,l).call(l,u.DEBUG,"Countly is not finished initialization yet, will process the queue after initialization is done");var e=w.q;w.q=[];for(var t=0;t<e.length;t++){var n=e[t];if(i(t9,l).call(l,u.DEBUG,"Processing queued calls:"+n),"function"==typeof n)n();else if(Array.isArray(n)&&n.length>0){var a=l,o=0;try{w.i[n[o]]&&(a=w.i[n[o]],o++)}catch(e){i(t9,l).call(l,u.DEBUG,"No instance found for the provided key while processing async queue"),w.q.push(n);continue}if("function"==typeof a[n[o]])a[n[o]].apply(a,n.slice(o+1));else if(0===n[o].indexOf("userData.")){var r=n[o].replace("userData.","");"function"==typeof a.userData[r]&&a.userData[r].apply(a,n.slice(o+1))}else if(0===n[o].indexOf("content.")){var c=n[o].replace("content.","");"function"==typeof a.content[c]&&a.content[c].apply(a,n.slice(o+1))}else if(0===n[o].indexOf("feedback.")){var s=n[o].replace("feedback.","");"function"==typeof a.feedback[s]&&a.feedback[s].apply(a,n.slice(o+1))}else"function"==typeof w[n[o]]&&w[n[o]].apply(w,n.slice(o+1))}}}),n(this,t1,function(){var e=i(ip,l).call(l,"cly_id");return e?(a(eC,l,i(ip,l).call(l,"cly_id_type")),e):E()}),n(this,t2,function(e){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-4[0-9a-fA-F]{3}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(e)}),n(this,t3,function(){return l.metrics&&l.metrics._ua?l.metrics._ua:x()}),n(this,t4,function(){var e=JSON.parse(JSON.stringify(l.metrics||{}));e._app_version=e._app_version||l.app_version,e._ua=e._ua||x();var t=i(t5,l).call(l);if(t){var n=""+t.width+"x"+t.height;e._resolution=e._resolution||n}y&&window.devicePixelRatio&&(e._density=e._density||window.devicePixelRatio);var a=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;return void 0!==a&&(e._locale=e._locale||a),i(t6,l).call(l)&&(e._store=e._store||document.referrer),i(t9,l).call(l,u.DEBUG,"Got metrics",e),e}),n(this,t5,function(e){if(i(t9,l).call(l,u.DEBUG,"Getting the resolution of the device"),!y||!screen)return i(t9,l).call(l,u.DEBUG,"No screen available"),null;var t=screen.width?parseInt(screen.width):0,n=screen.height?parseInt(screen.height):0;if(e){var a=window.innerWidth,o=window.innerHeight,r=document.documentElement.clientWidth,c=document.documentElement.clientHeight,s=Math.min(a,r),d=Math.min(o,c);t=s?parseInt(s):t,n=d?parseInt(d):n}return 0===t||0===n?(i(t9,l).call(l,u.DEBUG,"Screen width or height is non existent"),null):(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&window.devicePixelRatio&&(i(t9,l).call(l,u.VERBOSE,"Mobile Mac device detected, adjusting resolution"),t=Math.round(t*window.devicePixelRatio),n=Math.round(n*window.devicePixelRatio)),{width:t,height:n})}),n(this,t6,function(e){if(!y)return!1;var t=e||document.referrer,n=!1;if(void 0===t||0===t.length)i(t9,l).call(l,u.DEBUG,"Invalid referrer:["+t+"], ignoring.");else{var a=m.exec(t);if(a)if(a[11])if(a[11]===window.location.hostname)i(t9,l).call(l,u.DEBUG,"Referrer is current host:["+t+"], ignoring.");else if(i(ed,l)&&i(ed,l).length){n=!0;for(var o=0;o<i(ed,l).length;o++)if(t.indexOf(i(ed,l)[o])>=0){i(t9,l).call(l,u.DEBUG,"Referrer in ignore list:["+t+"], ignoring."),n=!1;break}}else i(t9,l).call(l,u.DEBUG,"Valid referrer:["+t+"]"),n=!0;else i(t9,l).call(l,u.DEBUG,"No path found in referrer:["+t+"], ignoring.");else i(t9,l).call(l,u.DEBUG,"Referrer is corrupt:["+t+"], ignoring.")}return n}),n(this,t9,function(e,t,n){if(l.debug&&"undefined"!=typeof console){n&&"object"===r(n)&&(n=JSON.stringify(n)),i(ee,l)||(t="["+l.app_key+"] "+t),e||(e=u.DEBUG);var a="";n&&(a=" "+n);var o=e+"[Countly] "+t+a;e===u.ERROR?(console.error(o),i(ik,l).incrementErrorCount()):e===u.WARNING?(console.warn(o),i(ik,l).incrementWarningCount()):e===u.INFO?console.info(o):e===u.VERBOSE?console.log(o):console.debug(o)}}),n(this,t8,function(e,t,n,a,o,r){if(!i(eX,l)&&!r)return void i(t9,l).call(l,u.DEBUG,"Network request is disabled by the SCNetwork");i(eq,l).push({functionName:e,url:t,params:n}),y?i(t7,l).call(l,e,t,n,a,o):i(ie,l).call(l,e,t,n,a,o)}),n(this,t7,function(e,t,n,o,r){r=r||!1;try{i(t9,l).call(l,u.DEBUG,"Sending XML HTTP request");var c=new XMLHttpRequest;c.timeout=i(tk,l),c.ontimeout=function(){i(t9,l).call(l,u.ERROR,e+" timed out after 30 seconds"),"function"==typeof o&&o(!0,n,"timeout")},n=n||{},D(n,l.salt).then(function(s){var d="POST";for(var g in(l.force_post||s.length>=2e3)&&(d="POST"),"GET"===d?c.open("GET",t+"?"+s,!0):(c.open("POST",t,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded")),l.headers)c.setRequestHeader(g,l.headers[g]);var p=N();c.onreadystatechange=function(){if(4===c.readyState){var t,s=N()-p;a(th,l,s),i(t9,l).call(l,u.DEBUG,e+" HTTP request completed with status code: ["+c.status+"] and response: ["+c.responseText+"], duration: ["+s+"] seconds"),(r?i(ii,l).call(l,c.status,c.responseText):i(it,l).call(l,c.status,c.responseText))?"function"==typeof o&&o(!1,n,c.responseText):(i(t9,l).call(l,u.ERROR,e+" Invalid response from server"),"send_request_queue"===e&&i(ik,l).saveRequestCounters(c.status,c.responseText),"function"==typeof o&&o(!0,n,c.status,c.responseText))}},"GET"===d?c.send():c.send(s)})}catch(t){i(t9,l).call(l,u.ERROR,e+" Something went wrong while making an XML HTTP request: "+t),"function"==typeof o&&o(!0,n)}}),n(this,ie,function(e,t,n,o,r){r=r||!1;try{i(t9,l).call(l,u.DEBUG,"Sending Fetch request");var c,s="POST",d={"Content-type":"application/x-www-form-urlencoded"},g=null;n=n||{},D(n,l.salt).then(function(p){for(var f in l.force_post||p.length>=2e3?(s="POST",g=p):t+="?"+p,l.headers)d[f]=l.headers[f];var h=N(),_=new AbortController,v=_.signal,m=setTimeout(function(){return _.abort()},i(tk,l));fetch(t,{method:s,headers:d,body:g,signal:v}).then(function(e){return clearTimeout(m),(c=e).text()}).then(function(t){var s,d=N()-h;a(th,l,d),i(t9,l).call(l,u.DEBUG,e+" Fetch request completed wit status code: ["+c.status+"] and response: ["+t+"], duration: ["+d+"] seconds"),(r?i(ii,l).call(l,c.status,t):i(it,l).call(l,c.status,t))?"function"==typeof o&&o(!1,n,t):(i(t9,l).call(l,u.ERROR,e+" Invalid response from server"),"send_request_queue"===e&&i(ik,l).saveRequestCounters(c.status,t),"function"==typeof o&&o(!0,n,c.status,t))}).catch(function(t){clearTimeout(m),"AbortError"===t.name?(i(t9,l).call(l,u.ERROR,e+" timed out after 30 seconds"),"function"==typeof o&&o(!0,n,"timeout")):(i(t9,l).call(l,u.ERROR,e+" Failed Fetch request: "+t),"function"==typeof o&&o(!0,n))})})}catch(t){i(t9,l).call(l,u.ERROR,e+" Something went wrong with the Fetch request attempt: "+t),"function"==typeof o&&o(!0,n)}}),n(this,it,function(e,t){if(!(e>=200&&e<300))return i(t9,l).call(l,u.ERROR,"Http response status code:["+e+"] is not within the expected range"),!1;try{var n=JSON.parse(t);if("[object Object]"!==Object.prototype.toString.call(n))return i(t9,l).call(l,u.ERROR,"Http response is not JSON Object"),!1;return!!n.result}catch(e){return i(t9,l).call(l,u.ERROR,"Http response is not JSON: "+e),!1}}),n(this,ii,function(e,t){if(!(e>=200&&e<300))return i(t9,l).call(l,u.ERROR,"Http response status code:["+e+"] is not within the expected range"),!1;try{var n=JSON.parse(t);if("[object Object]"!==Object.prototype.toString.call(n)&&!Array.isArray(n)&&"No content block found!"!==n)return i(t9,l).call(l,u.ERROR,"Http response is not JSON Object nor JSON Array"),!1;return!0}catch(e){return i(t9,l).call(l,u.ERROR,"Http response is not JSON: "+e),!1}}),n(this,ia,function(){if(!y)return void i(t9,l).call(l,u.WARNING,"processScroll, window object is not available. Not processing scroll.");a(eT,l,Math.max(i(eT,l),window.scrollY,document.body.scrollTop,document.documentElement.scrollTop))}),n(this,io,function(){if(!y)return void i(t9,l).call(l,u.WARNING,"processScrollView, window object is not available. Not processing scroll view.");if(i(eM,l)){a(eM,l,!1);var e=q(),t=V(),n=j();if(l.check_consent(c.SCROLLS)){var o={type:"scroll",y:i(eT,l)+n,width:t,height:e,view:l.getViewUrl()};o=M(o,i(tt,l),i(ti,l),i(tn,l),"processScrollView",i(t9,l)),l.track_domains&&(o.domain=window.location.hostname),i(tI,l).call(l,{key:s.ACTION,segmentation:o})}}}),n(this,ir,function(){return i(eC,l)}),n(this,il,function(e){i(ih,l).call(l,"cly_token",e)}),n(this,ic,function(){var e=i(ip,l).call(l,"cly_token");return i(i_,l).call(l,"cly_token"),e}),n(this,is,function(){return i(er,l)}),n(this,id,function(){return i(eo,l)}),n(this,iu,function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0,a=i.length;n<a;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}),n(this,ig,function(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*36e5);var a="; expires="+n.toGMTString();document.cookie=e+"="+t+a+"; path=/"}),n(this,ip,function(e,t,n){var a;if("none"===l.storage||"object"!==r(l.storage)&&!y)return void i(t9,l).call(l,u.DEBUG,"Storage is disabled. Value with key: ["+e+"] won't be retrieved");if(!n&&(e=l.app_key+"/"+e,l.namespace&&(e=A(l.namespace)+"/"+e)),l.storage&&"object"===r(l.storage)&&"function"==typeof l.storage.getItem)return a=l.storage.getItem(e),e.endsWith("cly_id")?a:l.deserialize(a);void 0===t&&(t=i(eD,l));try{if(t?a=localStorage.getItem(e):"localstorage"!==l.storage&&(a=i(iu,l).call(l,e)),e.endsWith("cly_id"))return a;return l.deserialize(a)}catch(e){}}),n(this,ih,function(e,t,n,a){if("none"===l.storage||"object"!==r(l.storage)&&!y)return void i(t9,l).call(l,u.DEBUG,"Storage is disabled. Value with key: "+e+" won't be stored");!a&&(e=l.app_key+"/"+e,l.namespace&&(e=A(l.namespace)+"/"+e));try{if(null!=t){if("object"===r(l.storage)&&"function"==typeof l.storage.setItem)return void l.storage.setItem(e,t);void 0===n&&(n=i(eD,l)),t=l.serialize(t),n?localStorage.setItem(e,t):"localstorage"!==l.storage&&i(ig,l).call(l,e,t,30)}}catch(e){}}),n(this,i_,function(e,t,n){if("none"===l.storage||"object"!==r(l.storage)&&!y)return void i(t9,l).call(l,u.DEBUG,"Storage is disabled. Value with key: "+e+" won't be removed");!n&&(e=l.app_key+"/"+e,l.namespace&&(e=A(l.namespace)+"/"+e));try{if("object"===r(l.storage)&&"function"==typeof l.storage.removeItem)return void l.storage.removeItem(e);void 0===t&&(t=i(eD,l)),t?localStorage.removeItem(e):"localstorage"!==l.storage&&i(ig,l).call(l,e,"",-1)}catch(e){}}),n(this,iv,function(){if(i(ip,l).call(l,l.namespace+"cly_id",!1,!0)){i(ih,l).call(l,"cly_id",i(ip,l).call(l,l.namespace+"cly_id",!1,!0)),i(ih,l).call(l,"cly_id_type",i(ip,l).call(l,l.namespace+"cly_id_type",!1,!0)),i(ih,l).call(l,"cly_event",i(ip,l).call(l,l.namespace+"cly_event",!1,!0)),i(ih,l).call(l,"cly_session",i(ip,l).call(l,l.namespace+"cly_session",!1,!0));var e=i(ip,l).call(l,l.namespace+"cly_queue",!1,!0);Array.isArray(e)&&(e=e.filter(function(e){return e.app_key===l.app_key}),i(ih,l).call(l,"cly_queue",e)),i(ip,l).call(l,l.namespace+"cly_cmp_id",!1,!0)&&(i(ih,l).call(l,"cly_cmp_id",i(ip,l).call(l,l.namespace+"cly_cmp_id",!1,!0)),i(ih,l).call(l,"cly_cmp_uid",i(ip,l).call(l,l.namespace+"cly_cmp_uid",!1,!0))),i(ip,l).call(l,l.namespace+"cly_ignore",!1,!0)&&i(ih,l).call(l,"cly_ignore",i(ip,l).call(l,l.namespace+"cly_ignore",!1,!0)),i(i_,l).call(l,"cly_id",!1,!0),i(i_,l).call(l,"cly_id_type",!1,!0),i(i_,l).call(l,"cly_event",!1,!0),i(i_,l).call(l,"cly_session",!1,!0),i(i_,l).call(l,"cly_queue",!1,!0),i(i_,l).call(l,"cly_cmp_id",!1,!0),i(i_,l).call(l,"cly_cmp_uid",!1,!0),i(i_,l).call(l,"cly_ignore",!1,!0)}}),n(this,im,function(e,t){switch(i(t9,l).call(l,u.DEBUG,"onStorageChange, Applying storage changes for key:",e),i(t9,l).call(l,u.DEBUG,"onStorageChange, Applying storage changes for value:",t),e){case"cly_queue":a(eo,l,l.deserialize(t||"[]"));break;case"cly_event":a(er,l,l.deserialize(t||"[]"));break;case"cly_remote_configs":a(el,l,l.deserialize(t||"{}"));break;case"cly_ignore":l.ignore_visitor=l.deserialize(t);break;case"cly_config":a(eK,l,l.deserialize(t||"{}")),i(tE,l).call(l,i(eK,l));break;case"cly_id":l.device_id=t;break;case"cly_id_type":a(eC,l,l.deserialize(t))}}),n(this,iy,function(){a(eo,l,[]),i(ih,l).call(l,"cly_queue",[]),a(er,l,[]),i(ih,l).call(l,"cly_event",[])}),n(this,iw,function(){return{eventQ:i(er,l),requestQ:i(eo,l)}}),o(this,"_internals",{store:i(ih,this),getDocWidth:V,getDocHeight:q,getViewportHeight:j,get_page_coord:z,get_event_target:U,add_event_listener:G,createNewObjectFromProperties:C,truncateObject:M,truncateSingleValue:T,stripTrailingSlash:A,prepareParams:D,sendXmlHttpRequest:i(t7,this),isResponseValid:i(it,this),getInternalDeviceIdType:i(ir,this),getMsTimestamp:O,getTimestamp:N,isResponseValidBroad:i(ii,this),secureRandom:b,log:i(t9,this),checkIfLoggingIsOn:X,getMetrics:i(t4,this),getUA:i(t3,this),prepareRequest:i(tK,this),generateUUID:E,sendEventsForced:i(tq,this),isUUID:i(t2,this),calculateChecksum:B,isReferrerUsable:i(t6,this),getId:i(t1,this),heartBeat:i(tQ,this),toRequestQueue:i(tX,this),reportViewDuration:i(tH,this),loadJS:J,loadCSS:Y,getLastView:i(tJ,this),setToken:i(il,this),getToken:i(ic,this),showLoader:K,hideLoader:Q,setValueInStorage:i(ih,this),getValueFromStorage:i(ip,this),removeValueFromStorage:i(i_,this),add_cly_events:i(tI,this),processScrollView:i(io,this),processScroll:i(ia,this),currentUserAgentString:x,currentUserAgentDataString:F,userAgentDeviceDetection:L,userAgentSearchBotDetection:P,getRequestQueue:i(id,this),getEventQueue:i(is,this),sendFetchRequest:i(ie,this),processAsyncQueue:i(t0,this),makeNetworkRequest:i(t8,this),onStorageChange:i(im,this),clearQueue:i(iy,this),getLocalQueues:i(iw,this),testingGetRequests:i(t$,this)}),n(this,ik,{sendInstantHCRequest:function(){if(i(eI,l)){i(t9,l).call(l,u.DEBUG,"sendInstantHCRequest, Offline mode is active. Not sending health check request."),a(eP,l,!0);return}var e=T(l.hcErrorMessage,1e3,"healthCheck",i(t9,l));""!==e&&(e=JSON.stringify(e));var t={hc:JSON.stringify({el:l.hcErrorCount,wl:l.hcWarningCount,sc:l.hcStatusCode,em:e,bom:l.hcBackoffCount,cbom:l.hcConsecutiveBackoffCount}),metrics:JSON.stringify({_app_version:l.app_version})};i(tK,l).call(l,t),i(t8,l).call(l,"[healthCheck]",l.url+i(ei,l),t,function(e){e||i(ik,l).resetAndSaveCounters()},!0)},resetAndSaveCounters:function(){i(ik,l).resetCounters(),i(ih,l).call(l,h.errorCount,l.hcErrorCount),i(ih,l).call(l,h.warningCount,l.hcWarningCount),i(ih,l).call(l,h.statusCode,l.hcStatusCode),i(ih,l).call(l,h.errorMessage,l.hcErrorMessage),i(ih,l).call(l,h.backoffCount,l.hcBackoffCount),i(ih,l).call(l,h.consecutiveBackoffCount,l.hcConsecutiveBackoffCount)},incrementErrorCount:function(){l.hcErrorCount++},incrementWarningCount:function(){l.hcWarningCount++},incrementBackoffCount:function(){l.hcBackoffCount++,i(ty,l)&&l.hcConsecutiveBackoffCount++,a(ty,l,!0),i(ih,l).call(l,h.backoffCount,l.hcBackoffCount),i(ih,l).call(l,h.consecutiveBackoffCount,l.hcConsecutiveBackoffCount)},resetLastRequestBackoffStatus:function(){a(ty,l,!1)},resetCounters:function(){l.hcErrorCount=0,l.hcWarningCount=0,l.hcStatusCode=-1,l.hcErrorMessage="",l.hcBackoffCount=0,l.hcConsecutiveBackoffCount=0},saveRequestCounters:function(e,t){l.hcStatusCode=e,l.hcErrorMessage=t,i(ih,l).call(l,h.statusCode,l.hcStatusCode),i(ih,l).call(l,h.errorMessage,l.hcErrorMessage)}}),a($,this,this),a(ee,this,!w.i),a(et,this,!1),a(ei,this,"/i"),a(en,this,"/o/sdk"),a(eo,this,[]),a(er,this,[]),a(el,this,{}),a(ec,this,[]),a(es,this,{}),a(eu,this,null),a(eg,this,!0),i(ep,this),a(ef,this,0),a(eh,this,null),a(e_,this,0),a(ev,this,0),a(em,this,0),a(ek,this,0),a(eR,this,!0),a(th,this,0),a(t_,this,0),a(tv,this,!1),a(eN,this,!1),a(eO,this,{}),a(eS,this,!0),a(eW,this,N()),a(eD,this,!0),a(eA,this,null),a(eC,this,g.SDK_GENERATED),a(eM,this,!1),a(eT,this,0),a(eB,this,!1),a(eG,this,null),a(eU,this,null),a(ex,this,null),a(eP,this,!1),a(eq,this,[]),a(eV,this,"/o/sdk/content"),a(ej,this,!1),a(eH,this,null),a(eJ,this,"cly-content-iframe"),a(eY,this,null),a(eX,this,!0),a(eQ,this,S("queue_size",t,p.QUEUE_SIZE)),a(eZ,this,S("max_events",t,p.MAX_EVENT_BATCH)),a(e$,this,S("session_update",t,p.SESSION_UPDATE)),a(e0,this,1e3*Math.max(S("content_zone_timer_interval",t,30),15)),a(e1,this,4),a(e2,this,!0),a(e3,this,!0),a(e5,this,!0),a(e4,this,!0),a(e6,this,!0),a(e9,this,!0),a(e8,this,!1),a(te,this,!0),a(e7,this,S("require_consent",t,!1)),a(tt,this,S("max_key_length",t,p.MAX_KEY_LENGTH)),a(ti,this,S("max_value_size",t,p.MAX_VALUE_SIZE)),a(tn,this,S("max_segmentation_values",t,p.MAX_SEGMENTATION_VALUES)),a(ta,this,S("max_breadcrumb_count",t,p.MAX_BREADCRUMB_COUNT)),a(to,this,S("max_stack_trace_lines_per_thread",t,p.MAX_STACKTRACE_LINES_PER_THREAD)),a(tr,this,S("max_stack_trace_line_length",t,p.MAX_STACKTRACE_LINE_LENGTH)),a(tl,this,!S("disable_backoff_mechanism",t,!1)),a(tc,this,10),a(ts,this,.5),a(td,this,24),a(tu,this,60),a(tk,this,3e4),this.app_key=S("app_key",t,null),this.url=A(S("url",t,"")),this.serialize=S("serialize",t,w.serialize),this.deserialize=S("deserialize",t,w.deserialize),a(tf,this,S("disable_sdk_behavior_settings_updates",t,!1)),a(tm,this,!1),a(tw,this,S("test_mode_time",t,0));try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(e){i(t9,this).call(this,u.ERROR,"Local storage test failed, Halting local storage support: "+e),a(eD,this,!1)}a(eK,this,i(ip,this).call(this,"cly_config")),i(eK,this)||(a(eK,this,S("behavior_settings",t,{})),i(ih,this).call(this,"cly_config",JSON.stringify(i(eK,this)))),i(tE,this).call(this,i(eK,this)),a(ez,this,{});for(var f=0;f<w.features.length;f++)i(ez,this)[w.features[f]]={};i(tR,this).call(this,t),i(tj,this).call(this),setTimeout(function(){w.noHeartBeat?i(t9,l).call(l,u.WARNING,"initialize, Heartbeat disabled. This is for testing purposes only!"):i(tQ,l).call(l),l.remote_config&&l.fetch_remote_config(l.remote_config)},1),y&&document.documentElement.setAttribute("data-countly-useragent",x()),a(tp,this,O()),i(ik,this).sendInstantHCRequest(),i(e8,this)&&(i(tB,this).call(this),a(tg,this,!0)),i(t9,this).call(this,u.INFO,"initialize, Countly initialized")},"prototype",{writable:!1}),l),iE=!0;w.features=[c.APM,c.ATTRIBUTION,c.CLICKS,c.CRASHES,c.EVENTS,c.FEEDBACK,c.FORMS,c.LOCATION,c.REMOTE_CONFIG,c.SCROLLS,c.SESSIONS,c.STAR_RATING,c.USERS,c.VIEWS],w.q=w.q||[],w.onload=w.onload||[],w.CountlyClass=ib,w.init=function(e){if(e=e||{},w.loadAPMScriptsAsync&&iE){var t,i,n,a,o,r,l;iE=!1,t=e,i=document.createElement("script"),n=document.createElement("script"),i.async=!0,n.async=!0,i.src=w.customSourceBoomerang||f.BOOMERANG_SRC,n.src=w.customSourceCountlyBoomerang||f.CLY_BOOMERANG_SRC,document.getElementsByTagName("head")[0].appendChild(i),document.getElementsByTagName("head")[0].appendChild(n),a=!1,o=!1,i.onload=function(){a=!0},n.onload=function(){o=!0},r=0,l=setInterval(function(){if(r+=50,a&&o||r>=1500){if(w.debug){var e="BoomerangJS loaded:["+a+"], countly_boomerang loaded:["+o+"].";a&&o?console.log(e="[DEBUG] "+e):console.warn(e="[WARNING] "+e+" Initializing without APM.")}w.init(t),clearInterval(l)}},50);return}var c=e.app_key||w.app_key;if(!w.i||!w.i[c]){var s=new ib(e);if(!w.i)for(var d in w.i={},s)w[d]=s[d];w.i[c]=s}return w.i[c]},w.serialize=function(e){try{"object"===r(e)&&(e=JSON.stringify(e))}catch(e){}return e},w.deserialize=function(e){if(""===e)return e;try{e=JSON.parse(e)}catch(e){}return e},w.getViewName=function(){return y?window.location.pathname:"web_worker"},w.getViewUrl=function(){return y?window.location.pathname:"web_worker"},w.getSearchQuery=function(){if(y)return window.location.search},w.DeviceIdType={DEVELOPER_SUPPLIED:g.DEVELOPER_SUPPLIED,SDK_GENERATED:g.SDK_GENERATED,TEMPORARY_ID:g.TEMPORARY_ID},y&&window.addEventListener("storage",function(e){var t=(e.key+"").split("/"),i=t.pop(),n=t.pop();w.i&&w.i[n]&&w.i[n]._internals.onStorageChange(i,e.newValue)}),e.default=w,Object.defineProperty(e,"__esModule",{value:!0})})(t)}}]);
//# sourceMappingURL=9e2a4553-1051cddca6dad9d2.js.map